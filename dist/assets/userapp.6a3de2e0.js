import"./style.a87c9e06.js";import{L as n}from"./leaflet.3e53c953.js";import"./dropdownData.a3ac6ca1.js";let i=n.map("map",{attributionControl:!1,center:new n.LatLng(22.6297,80.2123),zoom:4});n.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:20}).addTo(i);const m=(e,a)=>{new n.Marker([e,a]).addTo(i),i.flyTo([e,a],15)};let c=!1;const u=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(g,p):alert("Your browser or device doesn't support Geolocation")},g=e=>{document.getElementById("lat").value=e.coords.latitude,document.getElementById("long").value=e.coords.longitude,document.getElementById("location").value=e.coords.latitude+", "+e.coords.longitude,c=!0,m(e.coords.latitude,e.coords.longitude)},p=e=>{alert("Please enable location services")};u();let s="https://bitsofco.de/content/images/2018/12/Screenshot-2018-12-16-at-21.06.29.png";document.getElementById("report-form").addEventListener("submit",async e=>{if(!c){alert("Please enable location to submit form");return}const a=new FormData(e.target),t=Object.fromEntries(a),o=new Date;t.date=o.getDate()+"/"+o.getMonth()+"/"+o.getFullYear(),t.time=o.getHours()+""+o.getMinutes(),t.image=s,t.primary_type="",t.act_type="",t.verified=0;const d=await(await fetch("http://15.206.153.179:8000/crowd_post",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json();console.log(d),document.getElementById("report-form").reset()});let y=document.querySelector("#start-camera"),l=document.querySelector("#video"),f=document.querySelector("#click-photo"),r=document.querySelector("#canvas");y.addEventListener("click",async function(){let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});l.srcObject=e});f.addEventListener("click",function(){r.getContext("2d").drawImage(l,0,0,r.width,r.height),s=r.toDataURL("image/jpeg")});
