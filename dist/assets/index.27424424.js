import"./style.a87c9e06.js";import{L as xt}from"./leaflet.3e53c953.js";import"./dropdownData.a3ac6ca1.js";const tn=z=>z>ie*.3?"red":z>ie*.25?"orange":z>ie*.2?"yellow":z>ie*.1?"#90ee90":"green";let ie=0;const me={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},Dn=z=>{for(let K=0;K<z.length;K++)me[z[K].StationID]++,ie++};(()=>{var z={9705:(h,l,o)=>{var c=o(1540);function p(y){var f=[1/0,1/0,-1/0,-1/0];return c.coordEach(y,function(C){f[0]>C[0]&&(f[0]=C[0]),f[1]>C[1]&&(f[1]=C[1]),f[2]<C[0]&&(f[2]=C[0]),f[3]<C[1]&&(f[3]=C[1])}),f}p.default=p,l.Z=p},4102:(h,l)=>{function o(P,S,O){O===void 0&&(O={});var g={type:"Feature"};return(O.id===0||O.id)&&(g.id=O.id),O.bbox&&(g.bbox=O.bbox),g.properties=S||{},g.geometry=P,g}function c(P,S,O){if(O===void 0&&(O={}),!P)throw new Error("coordinates is required");if(!Array.isArray(P))throw new Error("coordinates must be an Array");if(P.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I(P[0])||!I(P[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:P},S,O)}function p(P,S,O){O===void 0&&(O={});for(var g=0,x=P;g<x.length;g++){var D=x[g];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<D[D.length-1].length;F++)if(D[D.length-1][F]!==D[0][F])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:P},S,O)}function y(P,S,O){if(O===void 0&&(O={}),P.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:P},S,O)}function f(P,S){S===void 0&&(S={});var O={type:"FeatureCollection"};return S.id&&(O.id=S.id),S.bbox&&(O.bbox=S.bbox),O.features=P,O}function C(P,S,O){return O===void 0&&(O={}),o({type:"MultiLineString",coordinates:P},S,O)}function A(P,S,O){return O===void 0&&(O={}),o({type:"MultiPoint",coordinates:P},S,O)}function G(P,S,O){return O===void 0&&(O={}),o({type:"MultiPolygon",coordinates:P},S,O)}function H(P,S){S===void 0&&(S="kilometers");var O=l.factors[S];if(!O)throw new Error(S+" units is invalid");return P*O}function T(P,S){S===void 0&&(S="kilometers");var O=l.factors[S];if(!O)throw new Error(S+" units is invalid");return P/O}function E(P){return 180*(P%(2*Math.PI))/Math.PI}function I(P){return!isNaN(P)&&P!==null&&!Array.isArray(P)}Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:100*l.earthRadius,centimetres:100*l.earthRadius,degrees:l.earthRadius/111325,feet:3.28084*l.earthRadius,inches:39.37*l.earthRadius,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:1e3*l.earthRadius,millimetres:1e3*l.earthRadius,nauticalmiles:l.earthRadius/1852,radians:1,yards:1.0936*l.earthRadius},l.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},l.feature=o,l.geometry=function(P,S,O){switch(P){case"Point":return c(S).geometry;case"LineString":return y(S).geometry;case"Polygon":return p(S).geometry;case"MultiPoint":return A(S).geometry;case"MultiLineString":return C(S).geometry;case"MultiPolygon":return G(S).geometry;default:throw new Error(P+" is invalid")}},l.point=c,l.points=function(P,S,O){return O===void 0&&(O={}),f(P.map(function(g){return c(g,S)}),O)},l.polygon=p,l.polygons=function(P,S,O){return O===void 0&&(O={}),f(P.map(function(g){return p(g,S)}),O)},l.lineString=y,l.lineStrings=function(P,S,O){return O===void 0&&(O={}),f(P.map(function(g){return y(g,S)}),O)},l.featureCollection=f,l.multiLineString=C,l.multiPoint=A,l.multiPolygon=G,l.geometryCollection=function(P,S,O){return O===void 0&&(O={}),o({type:"GeometryCollection",geometries:P},S,O)},l.round=function(P,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,S||0);return Math.round(P*O)/O},l.radiansToLength=H,l.lengthToRadians=T,l.lengthToDegrees=function(P,S){return E(T(P,S))},l.bearingToAzimuth=function(P){var S=P%360;return S<0&&(S+=360),S},l.radiansToDegrees=E,l.degreesToRadians=function(P){return P%360*Math.PI/180},l.convertLength=function(P,S,O){if(S===void 0&&(S="kilometers"),O===void 0&&(O="kilometers"),!(P>=0))throw new Error("length must be a positive number");return H(T(P,S),O)},l.convertArea=function(P,S,O){if(S===void 0&&(S="meters"),O===void 0&&(O="kilometers"),!(P>=0))throw new Error("area must be a positive number");var g=l.areaFactors[S];if(!g)throw new Error("invalid original units");var x=l.areaFactors[O];if(!x)throw new Error("invalid final units");return P/g*x},l.isNumber=I,l.isObject=function(P){return!!P&&P.constructor===Object},l.validateBBox=function(P){if(!P)throw new Error("bbox is required");if(!Array.isArray(P))throw new Error("bbox must be an Array");if(P.length!==4&&P.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");P.forEach(function(S){if(!I(S))throw new Error("bbox must only contain numbers")})},l.validateId=function(P){if(!P)throw new Error("id is required");if(["string","number"].indexOf(typeof P)===-1)throw new Error("id must be a number or a string")}},1540:(h,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(4102);function p(T,E,I){if(T!==null)for(var P,S,O,g,x,D,F,X,q=0,$=0,tt=T.type,Z=tt==="FeatureCollection",Q=tt==="Feature",ut=Z?T.features.length:1,et=0;et<ut;et++){x=(X=!!(F=Z?T.features[et].geometry:Q?T.geometry:T)&&F.type==="GeometryCollection")?F.geometries.length:1;for(var ht=0;ht<x;ht++){var vt=0,ct=0;if((g=X?F.geometries[ht]:F)!==null){D=g.coordinates;var Lt=g.type;switch(q=!I||Lt!=="Polygon"&&Lt!=="MultiPolygon"?0:1,Lt){case null:break;case"Point":if(E(D,$,et,vt,ct)===!1)return!1;$++,vt++;break;case"LineString":case"MultiPoint":for(P=0;P<D.length;P++){if(E(D[P],$,et,vt,ct)===!1)return!1;$++,Lt==="MultiPoint"&&vt++}Lt==="LineString"&&vt++;break;case"Polygon":case"MultiLineString":for(P=0;P<D.length;P++){for(S=0;S<D[P].length-q;S++){if(E(D[P][S],$,et,vt,ct)===!1)return!1;$++}Lt==="MultiLineString"&&vt++,Lt==="Polygon"&&ct++}Lt==="Polygon"&&vt++;break;case"MultiPolygon":for(P=0;P<D.length;P++){for(ct=0,S=0;S<D[P].length;S++){for(O=0;O<D[P][S].length-q;O++){if(E(D[P][S][O],$,et,vt,ct)===!1)return!1;$++}ct++}vt++}break;case"GeometryCollection":for(P=0;P<g.geometries.length;P++)if(p(g.geometries[P],E,I)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function y(T,E){var I;switch(T.type){case"FeatureCollection":for(I=0;I<T.features.length&&E(T.features[I].properties,I)!==!1;I++);break;case"Feature":E(T.properties,0)}}function f(T,E){if(T.type==="Feature")E(T,0);else if(T.type==="FeatureCollection")for(var I=0;I<T.features.length&&E(T.features[I],I)!==!1;I++);}function C(T,E){var I,P,S,O,g,x,D,F,X,q,$=0,tt=T.type==="FeatureCollection",Z=T.type==="Feature",Q=tt?T.features.length:1;for(I=0;I<Q;I++){for(x=tt?T.features[I].geometry:Z?T.geometry:T,F=tt?T.features[I].properties:Z?T.properties:{},X=tt?T.features[I].bbox:Z?T.bbox:void 0,q=tt?T.features[I].id:Z?T.id:void 0,g=(D=!!x&&x.type==="GeometryCollection")?x.geometries.length:1,S=0;S<g;S++)if((O=D?x.geometries[S]:x)!==null)switch(O.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(E(O,$,F,X,q)===!1)return!1;break;case"GeometryCollection":for(P=0;P<O.geometries.length;P++)if(E(O.geometries[P],$,F,X,q)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(E(null,$,F,X,q)===!1)return!1;$++}}function A(T,E){C(T,function(I,P,S,O,g){var x,D=I===null?null:I.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return E(c.feature(I,S,{bbox:O,id:g}),P,0)!==!1&&void 0}switch(D){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon"}for(var F=0;F<I.coordinates.length;F++){var X={type:x,coordinates:I.coordinates[F]};if(E(c.feature(X,S),P,F)===!1)return!1}})}function G(T,E){A(T,function(I,P,S){var O=0;if(I.geometry){var g=I.geometry.type;if(g!=="Point"&&g!=="MultiPoint"){var x,D=0,F=0,X=0;return p(I,function(q,$,tt,Z,Q){if(x===void 0||P>D||Z>F||Q>X)return x=q,D=P,F=Z,X=Q,void(O=0);var ut=c.lineString([x,q],I.properties);if(E(ut,P,S,Q,O)===!1)return!1;O++,x=q})!==!1&&void 0}}})}function H(T,E){if(!T)throw new Error("geojson is required");A(T,function(I,P,S){if(I.geometry!==null){var O=I.geometry.type,g=I.geometry.coordinates;switch(O){case"LineString":if(E(I,P,S,0,0)===!1)return!1;break;case"Polygon":for(var x=0;x<g.length;x++)if(E(c.lineString(g[x],I.properties),P,S,x)===!1)return!1}}})}l.coordAll=function(T){var E=[];return p(T,function(I){E.push(I)}),E},l.coordEach=p,l.coordReduce=function(T,E,I,P){var S=I;return p(T,function(O,g,x,D,F){S=g===0&&I===void 0?O:E(S,O,g,x,D,F)},P),S},l.featureEach=f,l.featureReduce=function(T,E,I){var P=I;return f(T,function(S,O){P=O===0&&I===void 0?S:E(P,S,O)}),P},l.findPoint=function(T,E){if(E=E||{},!c.isObject(E))throw new Error("options is invalid");var I,P=E.featureIndex||0,S=E.multiFeatureIndex||0,O=E.geometryIndex||0,g=E.coordIndex||0,x=E.properties;switch(T.type){case"FeatureCollection":P<0&&(P=T.features.length+P),x=x||T.features[P].properties,I=T.features[P].geometry;break;case"Feature":x=x||T.properties,I=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=T;break;default:throw new Error("geojson is invalid")}if(I===null)return null;var D=I.coordinates;switch(I.type){case"Point":return c.point(D,x,E);case"MultiPoint":return S<0&&(S=D.length+S),c.point(D[S],x,E);case"LineString":return g<0&&(g=D.length+g),c.point(D[g],x,E);case"Polygon":return O<0&&(O=D.length+O),g<0&&(g=D[O].length+g),c.point(D[O][g],x,E);case"MultiLineString":return S<0&&(S=D.length+S),g<0&&(g=D[S].length+g),c.point(D[S][g],x,E);case"MultiPolygon":return S<0&&(S=D.length+S),O<0&&(O=D[S].length+O),g<0&&(g=D[S][O].length-g),c.point(D[S][O][g],x,E)}throw new Error("geojson is invalid")},l.findSegment=function(T,E){if(E=E||{},!c.isObject(E))throw new Error("options is invalid");var I,P=E.featureIndex||0,S=E.multiFeatureIndex||0,O=E.geometryIndex||0,g=E.segmentIndex||0,x=E.properties;switch(T.type){case"FeatureCollection":P<0&&(P=T.features.length+P),x=x||T.features[P].properties,I=T.features[P].geometry;break;case"Feature":x=x||T.properties,I=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=T;break;default:throw new Error("geojson is invalid")}if(I===null)return null;var D=I.coordinates;switch(I.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=D.length+g-1),c.lineString([D[g],D[g+1]],x,E);case"Polygon":return O<0&&(O=D.length+O),g<0&&(g=D[O].length+g-1),c.lineString([D[O][g],D[O][g+1]],x,E);case"MultiLineString":return S<0&&(S=D.length+S),g<0&&(g=D[S].length+g-1),c.lineString([D[S][g],D[S][g+1]],x,E);case"MultiPolygon":return S<0&&(S=D.length+S),O<0&&(O=D[S].length+O),g<0&&(g=D[S][O].length-g-1),c.lineString([D[S][O][g],D[S][O][g+1]],x,E)}throw new Error("geojson is invalid")},l.flattenEach=A,l.flattenReduce=function(T,E,I){var P=I;return A(T,function(S,O,g){P=O===0&&g===0&&I===void 0?S:E(P,S,O,g)}),P},l.geomEach=C,l.geomReduce=function(T,E,I){var P=I;return C(T,function(S,O,g,x,D){P=O===0&&I===void 0?S:E(P,S,O,g,x,D)}),P},l.lineEach=H,l.lineReduce=function(T,E,I){var P=I;return H(T,function(S,O,g,x){P=O===0&&I===void 0?S:E(P,S,O,g,x)}),P},l.propEach=y,l.propReduce=function(T,E,I){var P=I;return y(T,function(S,O){P=O===0&&I===void 0?S:E(P,S,O)}),P},l.segmentEach=G,l.segmentReduce=function(T,E,I){var P=I,S=!1;return G(T,function(O,g,x,D,F){P=S===!1&&I===void 0?O:E(P,O,g,x,D,F),S=!0}),P}},414:(h,l,o)=>{o(7107);var c=o(2492),p=o.n(c);const y=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text"}}'),f=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen"}}'),C=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),A=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),G=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),H=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),T=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del circulo","finishCircle":"Presiona para finalizar el circulo","placeCircleMarker":"Presiona para colocar un marcador de circulo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover ultimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar Circulo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Remover Capas","drawCircleMarkerButton":"Dibujar Marcador de Circulo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),E=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),I=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),P=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),S=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),O={en:y,de:f,it:C,id:A,ro:G,ru:H,es:T,nl:E,fr:I,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:P,zh_tw:S,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}')};function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g(Object(n),!0).forEach(function(r){D(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const F={_globalEditModeEnabled:!1,enableGlobalEditMode:function(t){this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(e){e.pm.enable(t)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var t=this._addedLayers;for(var e in this._addedLayers={},t){var n=t[e];this._isRelevantForEdit(n)&&this.globalEditModeEnabled()&&n.pm.enable(x({},this.globalOptions))}},_layerAdded:function(t){var e=t.layer;this._addedLayers[L.stamp(e)]=e},_isRelevantForEdit:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowEditing}},X={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},t.forEach(function(e){e.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this.throttledReInitDrag,this),this.map.on("layeradd",this._layerAddedDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,t.forEach(function(e){e.pm.disableLayerDrag()}),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var t=this._addedLayersDrag;for(var e in this._addedLayersDrag={},t){var n=t[e];this._isRelevantForDrag(n)&&this.globalDragModeEnabled()&&n.pm.enableLayerDrag()}},_layerAddedDrag:function(t){var e=t.layer;this._addedLayersDrag[L.stamp(e)]=e},_isRelevantForDrag:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.draggable}},q={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(e){t._isRelevantForRemoval(e)&&(e.pm.disable(),e.on("click",t.removeLayer,t))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(e){e.off("click",t.removeLayer,t)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(t){var e=t.layer;this._isRelevantForRemoval(e)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(t){var e=t.target;this._isRelevantForRemoval(e)&&!e.pm.dragging()&&(e.removeFrom(this.map.pm._getContainingLayer()),e.remove(),e instanceof L.LayerGroup?(this._fireRemoveLayerGroup(e),this._fireRemoveLayerGroup(this.map,e)):(e.pm._fireRemove(e),e.pm._fireRemove(this.map,e)))},_isRelevantForRemoval:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRemoval}},$={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var t=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(e){return e instanceof L.Polyline}).forEach(function(e){t._isRelevantForRotate(e)&&e.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(t){return t instanceof L.Polyline}).forEach(function(t){t.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(t){var e=t.layer;this._isRelevantForRotate(e)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRotation}};function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tt(Object(n),!0).forEach(function(r){Q(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ut={_fireDrawStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},t,e)},_fireDrawEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},t,e)},_fireCreate:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:t,layer:t},e,n)},_fireCenterPlaced:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t==="Draw"?this._layer:void 0,r=t!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:n,layer:r,latlng:this._layer.getLatLng()},t,e)},_fireCut:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:cut",{shape:this._shape,layer:e,originalLayer:n},r,i)},_fireEdit:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:edit",{layer:this._layer,shape:this.getShape()},e,n)},_fireEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},t,e)},_fireUpdate:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},t,e)},_fireMarkerDragStart:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},n,r)},_fireMarkerDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},n,r)},_fireMarkerDragEnd:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e,intersectionReset:n},r,i)},_fireDragStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},t,e)},_fireDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",Z(Z({},t),{},{shape:this.getShape()}),e,n)},_fireDragEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},t,e)},_fireRemove:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:this.getShape()},n,r)},_fireVertexAdded:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:t,indexPath:e,latlng:n,shape:this.getShape()},r,i)},_fireVertexRemoved:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:t,indexPath:e,shape:this.getShape()},n,r)},_fireVertexClick:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},n,r)},_fireIntersect:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:t,shape:this.getShape()},e,n)},_fireLayerReset:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},n,r)},_fireChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:t,shape:this.getShape()},e,n)},_fireTextChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:t,shape:this.getShape()},e,n)},_fireSnapDrag:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snapdrag",e,n,r)},_fireSnap:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snap",e,n,r)},_fireUnsnap:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:unsnap",e,n,r)},_fireRotationEnable:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},n,r)},_fireRotationDisable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},e,n)},_fireRotationStart:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:e},n,r)},_fireRotation:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(t,"pm:rotate",{layer:r,helpLayer:this._layer,startAngle:this._startAngle,angle:r.pm.getAngle(),angleDiff:e,oldLatLngs:n,newLatLngs:r.getLatLngs()},i,u)},_fireRotationEnd:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:e,angle:this._rotationLayer.pm.getAngle(),originLatLngs:n,newLatLngs:this._rotationLayer.getLatLngs()},r,i)},_fireActionClick:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:t.text,action:t,btnName:e,button:n},r,i)},_fireButtonClick:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:t,button:e},n,r)},_fireLangChange:function(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:t,activeLang:e,fallback:n,translations:r},i,u)},_fireGlobalDragModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalEditModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalRemovalModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalCutModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},t,e)},_fireGlobalDrawModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},t,e)},_fireGlobalRotateModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},t,e)},_fireRemoveLayerGroup:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:void 0},n,r)},_fireKeyeventEvent:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:t,eventType:e,focusOn:n},r,i)},__fire:function(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};n=p()(n,i,{source:r}),L.PM.Utils._fireEvent(t,e,n)}};const et=ut,ht={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(t){this.map=t,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(t){var e="document";this.map.getContainer().contains(t.target)&&(e="map");var n={event:t,eventType:t.type,focusOn:e};this._lastEvents[t.type]=n,this._lastEvents.current=n,this.map.pm._fireKeyeventEvent(t,t.type,e)},_onBlur:function(t){t.altKey=!1;var e={event:t,eventType:t.type,focusOn:"document"};this._lastEvents[t.type]=e,this._lastEvents.current=e},getLastKeyEvent:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[t]},isShiftKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.shiftKey},isAltKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.altKey},isCtrlKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.ctrlKey},isMetaKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.metaKey},getPressedKey:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.key}};var vt=o(7361),ct=o.n(vt),Lt=o(8721),Dt=o.n(Lt);function lt(t){var e=L.PM.activeLang;return Dt()(O,e)||(e="en"),ct()(O[e],t)}function _t(t){return!function e(n){return n.filter(function(r){return![null,"",void 0].includes(r)}).reduce(function(r,i){return r.concat(Array.isArray(i)?e(i):i)},[])}(t).length}function Wt(t){return t.reduce(function(e,n){return n.length!==0&&e.push(Array.isArray(n)?Wt(n):n),e},[])}function Jt(t,e,n){for(var r,i,u,m=6378137,_=63567523142e-4,b=.0033528106647474805,k=t.lng,R=t.lat,N=n,B=Math.PI,V=e*B/180,Y=Math.sin(V),nt=Math.cos(V),at=(1-b)*Math.tan(R*B/180),pt=1/Math.sqrt(1+at*at),mt=at*pt,dt=Math.atan2(at,nt),Et=pt*Y,Bt=1-Et*Et,Ft=Bt*(m*m-_*_)/(_*_),We=1+Ft/16384*(4096+Ft*(Ft*(320-175*Ft)-768)),Te=Ft/1024*(256+Ft*(Ft*(74-47*Ft)-128)),qt=N/(_*We),Ze=2*Math.PI;Math.abs(qt-Ze)>1e-12;)r=Math.cos(2*dt+qt),Ze=qt,qt=N/(_*We)+Te*(i=Math.sin(qt))*(r+Te/4*((u=Math.cos(qt))*(2*r*r-1)-Te/6*r*(4*i*i-3)*(4*r*r-3)));var Qe=mt*i-pt*u*nt,Pn=Math.atan2(mt*u+pt*i*nt,(1-b)*Math.sqrt(Et*Et+Qe*Qe)),Be=b/16*Bt*(4+b*(4-3*Bt)),En=k+180*(Math.atan2(i*Y,pt*u-mt*i*nt)-(1-Be)*b*Et*(qt+Be*i*(r+Be*u*(2*r*r-1))))/B,Sn=180*Pn/B;return L.latLng(En,Sn)}function Zt(t,e,n,r){for(var i,u,m=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],_=[],b=0;b<n;b+=1){if(m)i=Jt(t,360*b/n+r,e),u=L.latLng(i.lng,i.lat);else{var k=t.lat+Math.cos(2*b*Math.PI/n)*e,R=t.lng+Math.sin(2*b*Math.PI/n)*e;u=L.latLng(k,R)}_.push(u)}return _}function Gt(t,e,n,r){var i=function(u,m,_){var b=u.latLngToContainerPoint(m),k=u.latLngToContainerPoint(_),R=180*Math.atan2(k.y-b.y,k.x-b.x)/Math.PI+90;return R+(R<0?360:0)}(t,e,n);return function(u,m,_){m=(m+360)%360;var b=Math.PI/180,k=180/Math.PI,R=6378137,N=u.lng*b,B=u.lat*b,V=m*b,Y=Math.sin(B),nt=Math.cos(B),at=Math.cos(_/R),pt=Math.sin(_/R),mt=Math.asin(Y*at+nt*pt*Math.cos(V)),dt=N+Math.atan2(Math.sin(V)*pt*nt,at-Y*Math.sin(mt));return dt=(dt*=k)>180?dt-360:dt<-180?dt+360:dt,L.latLng([mt*k,dt])}(e,i,r)}function Nt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLatLngs();return t instanceof L.Polygon?L.polygon(e).getLatLngs():L.polyline(e).getLatLngs()}function se(t,e){var n,r;if((n=e.options.crs)!==null&&n!==void 0&&(r=n.projection)!==null&&r!==void 0&&r.MAX_LATITUDE){var i,u,m=(i=e.options.crs)===null||i===void 0||(u=i.projection)===null||u===void 0?void 0:u.MAX_LATITUDE;t.lat=Math.max(Math.min(m,t.lat),-m)}return t}function Ut(t){return t.options.renderer||t._map&&(t._map._getPaneRenderer(t.options.pane)||t._map.options.renderer||t._map._renderer)||t._renderer}const ye=L.Class.extend({includes:[F,X,q,$,et],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this.Keyboard=ht,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(t)},setLang:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",r=L.PM.activeLang;e&&(O[t]=p()(O[n],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this._fireLangChange(r,t,n,O[t])},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",e=arguments.length>1?arguments[1]:void 0;t==="Poly"&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";t==="Poly"&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.ignoreShapes||[],i=n.merge||!1;this.map.pm.Draw.shapes.forEach(function(u){r.indexOf(u)===-1&&e.map.pm.Draw[u].setPathOptions(t,i)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,n=p()(this.globalOptions,t),r=!1;this.map.pm.Draw.CircleMarker.enabled()&&this.map.pm.Draw.CircleMarker.options.editable!==n.editable&&(this.map.pm.Draw.CircleMarker.disable(),r=!0),this.map.pm.Draw.shapes.forEach(function(i){e.map.pm.Draw[i].setOptions(n)}),r&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(i){i.pm.setOptions(n)}),this.applyGlobalOptions(),this.globalOptions=n},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.enabled()&&t.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map);if(!t)return e;var n=L.featureGroup();return n._pmTempLayer=!0,e.forEach(function(r){n.addLayer(r)}),n},getGeomanDrawLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map).filter(function(r){return r._drawnByGeoman===!0});if(!t)return e;var n=L.featureGroup();return n._pmTempLayer=!0,e.forEach(function(r){n.addLayer(r)}),n},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(t){this._touchEventCounter===0&&(L.DomEvent.on(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(t){this._touchEventCounter===1&&(L.DomEvent.off(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(t){Ut(this.map)._onMouseMove(this._createMouseEvent("mousemove",t))},_canvasTouchClick:function(t){var e="";t.type==="touchstart"||t.type==="pointerdown"?e="mousedown":t.type==="touchend"||t.type==="pointerup"?e="mouseup":t.type!=="touchcancel"&&t.type!=="pointercancel"||(e="mouseup"),e&&Ut(this.map)._onClick(this._createMouseEvent(e,t))},_createMouseEvent:function(t,e){var n,r=e.touches[0]||e.changedTouches[0];try{n=new MouseEvent(t,{bubbles:e.bubbles,cancelable:e.cancelable,view:e.view,detail:r.detail,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button,relatedTarget:e.relatedTarget})}catch{(n=document.createEvent("MouseEvents")).initMouseEvent(t,e.bubbles,e.cancelable,e.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}return n}});function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?le(Object(n),!0).forEach(function(r){ve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Tt=L.Control.extend({includes:[et],options:{position:"topleft"},initialize:function(t){this._button=Qt(Qt({},this.options),t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus=typeof t=="boolean"?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(t){t&&t.preventDefault(),this._button.disabled||(this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t}))},_makeButton:function(t){var e=this,n=this.options.position.indexOf("right")>-1?"pos-right":"",r=L.DomUtil.create("div","button-container  ".concat(n),this._container);t.title&&r.setAttribute("title",t.title);var i=L.DomUtil.create("a","leaflet-buttons-control-button",r);i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.href="#";var u=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(n),r),m=t.actions,_={cancel:{text:lt("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:lt("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:lt("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[t.jsClass]._removeLastVertex()}},finish:{text:lt("actions.finish"),onClick:function(k){this._map.pm.Draw[t.jsClass]._finishShape(k)}}};m.forEach(function(k){var R,N=typeof k=="string"?k:k.name;if(_[N])R=_[N];else{if(!k.text)return;R=k}var B=L.DomUtil.create("a","leaflet-pm-action ".concat(n," action-").concat(N),u);B.setAttribute("role","button"),B.setAttribute("tabindex","0"),B.href="#",B.innerHTML=R.text,L.DomEvent.disableClickPropagation(B),L.DomEvent.on(B,"click",L.DomEvent.stop),!t.disabled&&R.onClick&&(L.DomEvent.addListener(B,"click",function(V){V.preventDefault();var Y="",nt=e._map.pm.Toolbar.buttons;for(var at in nt)if(nt[at]._button===t){Y=at;break}e._fireActionClick(R,Y,t)},e),L.DomEvent.addListener(B,"click",R.onClick,e))}),t.toggleStatus&&L.DomUtil.addClass(r,"active");var b=L.DomUtil.create("div","control-icon",i);return t.iconUrl&&b.setAttribute("src",t.iconUrl),t.className&&L.DomUtil.addClass(b,t.className),L.DomEvent.disableClickPropagation(i),L.DomEvent.on(i,"click",L.DomEvent.stop),t.disabled||(L.DomEvent.addListener(i,"click",this._onBtnClick,this),L.DomEvent.addListener(i,"click",this._triggerClick,this)),t.disabled&&(L.DomUtil.addClass(i,"pm-disabled"),i.setAttribute("aria-disabled","true")),r},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var t="",e=this._map.pm.Toolbar.buttons;for(var n in e)if(e[n]._button===this._button){t=n;break}this._fireButtonClick(t,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var t="pm-disabled",e=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(e,t),e.setAttribute("aria-disabled","true"),L.DomEvent.off(e,"click",this._triggerClick,this),L.DomEvent.off(e,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(e,t),e.setAttribute("aria-disabled","false"),L.DomEvent.on(e,"click",this._triggerClick,this),L.DomEvent.on(e,"click",this._onBtnClick,this))}}});function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?he(Object(n),!0).forEach(function(r){Le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function te(t){return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(t)}L.Control.PMButton=Tt;const v=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof t.editPolygon<"u"&&(t.editMode=t.editPolygon),typeof t.deleteLayer<"u"&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var t=this.getButtons(),e={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var n in t){var r=t[n];L.Util.setOptions(r,{className:e.geomanIcons[n]})}},removeControls:function(){var t=this.getButtons();for(var e in t)t[e].remove();this.isVisible=!1},toggleControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){var e=["snappingOption"];for(var n in this.buttons)!e.includes(n)&&this.buttons[n]!==t&&this.buttons[n].toggled()&&this.buttons[n]._triggerClick()},toggleButton:function(t,e){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return t==="editPolygon"&&(t="editMode"),t==="deleteLayer"&&(t="removalMode"),n&&this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var t=this,e={className:"control-icon leaflet-pm-icon-marker",title:lt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},n={title:lt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},r={className:"control-icon leaflet-pm-icon-polyline",title:lt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},i={title:lt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},u={title:lt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:lt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:lt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:lt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},k={title:lt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},R={title:lt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},N={title:lt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},B={className:"control-icon leaflet-pm-icon-text",title:lt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(e)),this._addButton("drawPolyline",new L.Control.PMButton(r)),this._addButton("drawRectangle",new L.Control.PMButton(m)),this._addButton("drawPolygon",new L.Control.PMButton(n)),this._addButton("drawCircle",new L.Control.PMButton(i)),this._addButton("drawCircleMarker",new L.Control.PMButton(u)),this._addButton("drawText",new L.Control.PMButton(B)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(k)),this._addButton("removalMode",new L.Control.PMButton(R)),this._addButton("rotateMode",new L.Control.PMButton(N))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var t=this.getButtons(),e=[];for(var n in this.options.drawControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return!t[i]._button.tool}))),this.options.editControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="edit"}))),this.options.optionsControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="options"}))),this.options.customControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="custom"}))),t)if(this.options[n]&&e.indexOf(n)===-1){var r=t[n]._button.tool;r||(r="draw"),t[n].setPosition(this._getBtnPosition(r)),t[n].addTo(this.map)}}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");te(e)!=="object"&&(e={name:e});var n=this._btnNameMapping(t);if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");var r=this.map.pm.Draw.createNewDrawInstance(e.name,n);return e=ue(ue({},this.buttons[n]._button),e),{drawInstance:r,control:this.createCustomControl(e)}},createCustomControl:function(t){if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),t.toggle!==!1&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&t.block!=="draw"||(t.block=""),t.className?t.className.indexOf("control-icon")===-1&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var e={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:!0,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};this.options[t.name]!==!1&&(this.options[t.name]=!0);var n=this._addButton(t.name,new L.Control.PMButton(e));return this.changeControlOrder(),n},changeControlOrder:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this._shapeMapping(),n=[];t.forEach(function(k){e[k]?n.push(e[k]):n.push(k)});var r=this.getButtons(),i={};n.forEach(function(k){r[k]&&(i[k]=r[k])});var u=Object.keys(r).filter(function(k){return!r[k]._button.tool});u.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])});var m=Object.keys(r).filter(function(k){return r[k]._button.tool==="edit"});m.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])});var _=Object.keys(r).filter(function(k){return r[k]._button.tool==="options"});_.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])});var b=Object.keys(r).filter(function(k){return r[k]._button.tool==="custom"});b.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])}),Object.keys(r).forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])}),this.map.pm.Toolbar.buttons=i,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),e=[];for(var n in t)e.push(n);return e},changeActionsOfControl:function(t,e){var n=this._btnNameMapping(t);if(!n)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[n])throw new TypeError("Button with this name not exists");this.buttons[n]._button.actions=e,this.changeControlOrder()},setButtonDisabled:function(t,e){var n=this._btnNameMapping(t);e?this.buttons[n].disable():this.buttons[n].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(t){var e=this._shapeMapping();return e[t]?e[t]:t}});function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(r){d(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var M={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach(function(n){Array.isArray(n)?e._assignEvents(n):(n.off("drag",e._handleSnapping,e),n.on("drag",e._handleSnapping,e),n.off("dragend",e._cleanupSnapping,e),n.on("dragend",e._cleanupSnapping,e))})},_cleanupSnapping:function(){delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(t){t.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(t){var e=this,n=t.target;if(n._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var r=this._calcClosestLayer(n.getLatLng(),this._snapList);if(Object.keys(r).length===0)return!1;var i,u=r.layer instanceof L.Marker||r.layer instanceof L.CircleMarker||!this.options.snapSegment;i=u?r.latlng:this._checkPrioritiySnapping(r);var m=this.options.snapDistance,_={marker:n,shape:this._shape,snapLatLng:i,segment:r.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:r.layer,distance:r.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),r.distance<m){n._orgLatLng=n.getLatLng(),n.setLatLng(i),n._snapped=!0,n._snapInfo=_;var b=this._snapLatLng||{},k=i||{};b.lat===k.lat&&b.lng===k.lng||(e._snapLatLng=i,e._fireSnap(n,_),e._fireSnap(e._layer,_))}else this._snapLatLng&&(this._unsnap(_),n._snapped=!1,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList:function(){var t=this,e=[],n=[],r=this._map;r.off("pm:remove",this._handleSnapLayerRemoval,this),r.on("pm:remove",this._handleSnapLayerRemoval,this),r.eachLayer(function(i){if((i instanceof L.Polyline||i instanceof L.Marker||i instanceof L.CircleMarker||i instanceof L.ImageOverlay)&&i.options.snapIgnore!==!0){if(i.options.snapIgnore===void 0&&(!L.PM.optIn&&i.options.pmIgnore===!0||L.PM.optIn&&i.options.pmIgnore!==!1))return;(i instanceof L.Circle||i instanceof L.CircleMarker)&&i.pm&&i.pm._hiddenPolyCircle?e.push(i.pm._hiddenPolyCircle):i instanceof L.ImageOverlay&&(i=L.rectangle(i.getBounds())),e.push(i);var u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,n.push(u),(i instanceof L.Circle||i instanceof L.CircleMarker)&&n.push(u)}}),e=(e=(e=e.filter(function(i){return t._layer!==i})).filter(function(i){return i._latlng||i._latlngs&&!_t(i._latlngs)})).filter(function(i){return!i._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var i=L.polyline([],{color:"red",pmIgnore:!0});i._pmTempLayer=!0,n.push(i)}),this._snapList=e.concat(this._otherSnapLayers)):this._snapList=e,this.debugIndicatorLines=n},_handleSnapLayerRemoval:function(t){var e=t.layer,n=this._snapList.findIndex(function(r){return r._leaflet_id===e._leaflet_id});this._snapList.splice(n,1)},_calcClosestLayer:function(t,e){var n=this,r=[],i={};return e.forEach(function(u,m){if(!u._parentCopy||u._parentCopy!==n._layer){var _=n._calcLayerDistances(t,u);n.debugIndicatorLines[m]&&n.debugIndicatorLines[m].setLatLngs([t,_.latlng]),(i.distance===void 0||_.distance<=i.distance)&&(_.distance<i.distance&&(r=[]),(i=_).layer=u,r.push(i))}}),this._getClosestLayerByPriority(r)},_calcLayerDistances:function(t,e){var n,r,i,u=this,m=this._map,_=e instanceof L.Marker||e instanceof L.CircleMarker,b=e instanceof L.Polygon,k=t,R=_?e.getLatLng():e.getLatLngs();return _?{latlng:s({},R),distance:this._getDistance(m,R,k)}:(function N(B){B.forEach(function(V,Y){if(Array.isArray(V))N(V);else if(u.options.snapSegment){var nt,at=V;nt=b?Y+1===B.length?0:Y+1:Y+1===B.length?void 0:Y+1;var pt=B[nt];if(pt){var mt=u._getDistanceToSegment(m,k,at,pt);(r===void 0||mt<r)&&(r=mt,i=[at,pt])}}else{var dt=u._getDistance(m,k,V);(r===void 0||dt<r)&&(r=dt,n=V)}})}(R),this.options.snapSegment?{latlng:s({},this._getClosestPointOnSegment(m,t,i[0],i[1])),segment:i,distance:r}:{latlng:n,distance:r})},_getClosestLayerByPriority:function(t){t=t.sort(function(i,u){return i._leaflet_id-u._leaflet_id});var e=this._map.pm.globalOptions.snappingOrder||[],n=0,r={};return e.concat(["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"]).forEach(function(i){r[i]||(n+=1,r[i]=n)}),t.sort(function(i,u){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!u||Object.keys(u).length===0)return function(B,V){return B-V};for(var _,b=Object.keys(u),k=b.length-1,R={};k>=0;)_=b[k],R[_.toLowerCase()]=u[_],k-=1;function N(B){return B instanceof L.Marker?"Marker":B instanceof L.Circle?"Circle":B instanceof L.CircleMarker?"CircleMarker":B instanceof L.Rectangle?"Rectangle":B instanceof L.Polygon?"Polygon":B instanceof L.Polyline?"Line":void 0}return function(B,V){var Y,nt;if(i==="instanceofShape"){if(Y=N(B.layer).toLowerCase(),nt=N(V.layer).toLowerCase(),!Y||!nt)return 0}else{if(!B.hasOwnProperty(i)||!V.hasOwnProperty(i))return 0;Y=B[i].toLowerCase(),nt=V[i].toLowerCase()}var at=Y in R?R[Y]:Number.MAX_SAFE_INTEGER,pt=nt in R?R[nt]:Number.MAX_SAFE_INTEGER,mt=0;return at<pt?mt=-1:at>pt&&(mt=1),m==="desc"?-1*mt:mt}}("instanceofShape",r)),t[0]||{}},_checkPrioritiySnapping:function(t){var e=this._map,n=t.segment[0],r=t.segment[1],i=t.latlng,u=this._getDistance(e,n,i),m=this._getDistance(e,r,i),_=u<m?n:r,b=u<m?u:m;if(this.options.snapMiddle){var k=L.PM.Utils.calcMiddleLatLng(e,n,r),R=this._getDistance(e,k,i);R<u&&R<m&&(_=k,b=R)}return s({},b<this.options.snapDistance?_:i)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,e,n,r){var i=t.getMaxZoom();i===1/0&&(i=t.getZoom());var u=t.project(e,i),m=t.project(n,i),_=t.project(r,i),b=L.LineUtil.closestPointOnSegment(u,m,_);return t.unproject(b,i)},_getDistanceToSegment:function(t,e,n,r){var i=t.latLngToLayerPoint(e),u=t.latLngToLayerPoint(n),m=t.latLngToLayerPoint(r);return L.LineUtil.pointToSegmentDistance(i,u,m)},_getDistance:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))}};const w=M,j=L.Class.extend({includes:[w,et],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},initialize:function(t){var e=this,n=new L.Icon.Default;n.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=n,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(r){e[r]=new L.PM.Draw[r](e._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=e?p()(this.options.pathOptions,t):t},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var t=this;this.shapes.forEach(function(e){t[e].disable()})},addControls:function(){var t=this;this.shapes.forEach(function(e){t[e].addButton()})},getActiveShape:function(){var t,e=this;return this.shapes.forEach(function(n){e[n]._enabled&&(t=n)}),t},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var t=L.PM.Utils.findLayers(this._map);this._enabled?t.forEach(function(e){L.PM.Utils.disablePopup(e)}):t.forEach(function(e){L.PM.Utils.enablePopup(e)})},createNewDrawInstance:function(t,e){var n=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[n])throw new TypeError("There is no class L.PM.Draw.".concat(n));return this[t]=new L.PM.Draw[n](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return e[t]?e[t]:this[t]?this[t]._shape:t},_finishLayer:function(t){t.pm&&(t.pm.setOptions(this.options),t.pm._shape=this._shape,t.pm._map=this._map),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});j.Marker=j.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker([0,0],this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(n){e.isRelevantMarker(n)&&n.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer&&!t.pm._initTextMarker},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(t){if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=new L.Marker(e,this.options.markerStyle);this._setPane(n,"markerPane"),this._finishLayer(n),n.pm||(n.options.draggable=!1),n.addTo(this._map.pm._getContainingLayer()),n.pm&&this.options.markerEditable?n.pm.enable():n.dragging&&n.dragging.disable(),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}}});var U=63710088e-1,J={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*U,kilometers:6371.0088,kilometres:6371.0088,meters:U,metres:U,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:U/1852,radians:1,yards:6967335223679999e-9};function rt(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function ot(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kt(t[0])||!kt(t[1]))throw new Error("coordinates must contain numbers");return rt({type:"Point",coordinates:t},e,n)}function st(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return rt({type:"LineString",coordinates:t},e,n)}function it(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function bt(t,e){e===void 0&&(e="kilometers");var n=J[e];if(!n)throw new Error(e+" units is invalid");return t*n}function gt(t,e){e===void 0&&(e="kilometers");var n=J[e];if(!n)throw new Error(e+" units is invalid");return t/n}function yt(t){return 180*(t%(2*Math.PI))/Math.PI}function ft(t){return t%360*Math.PI/180}function kt(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function wt(t){var e,n,r={type:"FeatureCollection",features:[]};if((n=t.type==="Feature"?t.geometry:t).type==="LineString")e=[n.coordinates];else if(n.type==="MultiLineString")e=n.coordinates;else if(n.type==="MultiPolygon")e=[].concat.apply([],n.coordinates);else{if(n.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(i){e.forEach(function(u){for(var m=0;m<i.length-1;m++)for(var _=m;_<u.length-1;_++)if(!(i===u&&(Math.abs(m-_)===1||m===0&&_===i.length-2&&i[m][0]===i[i.length-1][0]&&i[m][1]===i[i.length-1][1]))){var b=Ot(i[m][0],i[m][1],i[m+1][0],i[m+1][1],u[_][0],u[_][1],u[_+1][0],u[_+1][1]);b&&r.features.push(ot([b[0],b[1]]))}})}),r}function Ot(t,e,n,r,i,u,m,_){var b,k,R,N,B={x:null,y:null,onLine1:!1,onLine2:!1};return(b=(_-u)*(n-t)-(m-i)*(r-e))===0?B.x!==null&&B.y!==null&&B:(N=(n-t)*(k=e-u)-(r-e)*(R=t-i),k=((m-i)*k-(_-u)*R)/b,R=N/b,B.x=t+k*(n-t),B.y=e+k*(r-e),k>=0&&k<=1&&(B.onLine1=!0),R>=0&&R<=1&&(B.onLine2=!0),!(!B.onLine1||!B.onLine2)&&[B.x,B.y])}function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ct(Object(n),!0).forEach(function(r){Vt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function At(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rt(Object(n),!0).forEach(function(r){zt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function St(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function jt(t){return t.type==="Feature"?t.geometry:t}function Yt(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function be(t,e,n){if(t!==null)for(var r,i,u,m,_,b,k,R,N=0,B=0,V=t.type,Y=V==="FeatureCollection",nt=V==="Feature",at=Y?t.features.length:1,pt=0;pt<at;pt++){_=(R=!!(k=Y?t.features[pt].geometry:nt?t.geometry:t)&&k.type==="GeometryCollection")?k.geometries.length:1;for(var mt=0;mt<_;mt++){var dt=0,Et=0;if((m=R?k.geometries[mt]:k)!==null){b=m.coordinates;var Bt=m.type;switch(N=!n||Bt!=="Polygon"&&Bt!=="MultiPolygon"?0:1,Bt){case null:break;case"Point":if(e(b,B,pt,dt,Et)===!1)return!1;B++,dt++;break;case"LineString":case"MultiPoint":for(r=0;r<b.length;r++){if(e(b[r],B,pt,dt,Et)===!1)return!1;B++,Bt==="MultiPoint"&&dt++}Bt==="LineString"&&dt++;break;case"Polygon":case"MultiLineString":for(r=0;r<b.length;r++){for(i=0;i<b[r].length-N;i++){if(e(b[r][i],B,pt,dt,Et)===!1)return!1;B++}Bt==="MultiLineString"&&dt++,Bt==="Polygon"&&Et++}Bt==="Polygon"&&dt++;break;case"MultiPolygon":for(r=0;r<b.length;r++){for(Et=0,i=0;i<b[r].length;i++){for(u=0;u<b[r][i].length-N;u++){if(e(b[r][i][u],B,pt,dt,Et)===!1)return!1;B++}Et++}dt++}break;case"GeometryCollection":for(r=0;r<m.geometries.length;r++)if(be(m.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ee(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function an(t,e){var n,r,i,u,m,_,b,k,R,N,B=0,V=t.type==="FeatureCollection",Y=t.type==="Feature",nt=V?t.features.length:1;for(n=0;n<nt;n++){for(_=V?t.features[n].geometry:Y?t.geometry:t,k=V?t.features[n].properties:Y?t.properties:{},R=V?t.features[n].bbox:Y?t.bbox:void 0,N=V?t.features[n].id:Y?t.id:void 0,m=(b=!!_&&_.type==="GeometryCollection")?_.geometries.length:1,i=0;i<m;i++)if((u=b?_.geometries[i]:_)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(e(u,B,k,R,N)===!1)return!1;break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(e(u.geometries[r],B,k,R,N)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(e(null,B,k,R,N)===!1)return!1;B++}}function ke(t,e){an(t,function(n,r,i,u,m){var _,b=n===null?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return e(rt(n,i,{bbox:u,id:m}),r,0)!==!1&&void 0}switch(b){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon"}for(var k=0;k<n.coordinates.length;k++){var R=n.coordinates[k];if(e(rt({type:_,coordinates:R},i),r,k)===!1)return!1}})}j.Line=j.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();if(t.length>0){var e=t[t.length-1];this._hintline.setLatLngs([e,this._hintMarker.getLatLng()])}},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,t.latlng);var n=this._layer._defaultShape().slice();n.push(this._hintMarker.getLatLng()),this._change(n)},hasSelfIntersection:function(){return wt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(t,e){var n=L.polyline(this._layer.getLatLngs());t&&(e||(e=this._hintMarker.getLatLng()),n.addLatLng(e));var r=wt(n.toGeoJSON(15));this._doesSelfIntersect=r.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(t){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,t.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();if(e.equals(this._layer.getLatLngs()[0]))this._finishShape(t);else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:e,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(e);var n=this._createMarker(e);this._setTooltipText(),this._hintline.setLatLngs([e,e]),this._fireVertexAdded(n,void 0,e,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(t)}}},_removeLastVertex:function(){var t=this._layer.getLatLngs(),e=t.pop();if(t.length<1)this.disable();else{var n=this._layerGroup.getLayers().filter(function(u){return u instanceof L.Marker}).filter(function(u){return!L.DomUtil.hasClass(u._icon,"cursor-marker")}).find(function(u){return u.getLatLng()===e}),r=this._layerGroup.getLayers().filter(function(u){return u instanceof L.Marker}),i=L.PM.Utils.findDeepMarkerIndex(r,n).indexPath;this._layerGroup.removeLayer(n),this._layer.setLatLngs(t),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(n,i,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=1)){var e=L.polyline(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),e.on("click",this._finishShape,this),e},_setTooltipText:function(){var t="";t=lt(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(t)},_change:function(t){this._fireChange(t,"Draw")}}),j.Polygon=j.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._layer.getLatLngs().flat().length===1?(e.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(e)-1,this.options.snappable&&this._cleanupSnapping()):e.on("click",function(){return 1}),e},_setTooltipText:function(){var t="";t=lt(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(t)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=2)){var e=L.polygon(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),j.Rectangle=j.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker([0,0],{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(var e=0;e<2;e+=1){var n=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(n,"vertexPane"),n._pmTempLayer=!0,this._layerGroup.addLayer(n),this._styleMarkers.push(n)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(n){L.DomUtil.addClass(n._icon,"visible"),n.setLatLng(e)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(lt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}var n=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(n,"Draw")},_syncRectangleSize:function(){var t=this,e=se(this._startMarker.getLatLng(),this._map),n=se(this._hintMarker.getLatLng(),this._map),r=L.PM.Utils._getRotatedRectangle(e,n,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(r),this.options.cursorMarker&&this._styleMarkers){var i=[];r.forEach(function(u){u.equals(e,1e-8)||u.equals(n,1e-8)||i.push(u)}),i.forEach(function(u,m){try{t._styleMarkers[m].setLatLng(u)}catch{}})}},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var r=L.rectangle([n,e],this.options.pathOptions);if(this.options.rectangleAngle){var i=L.PM.Utils._getRotatedRectangle(n,e,this.options.rectangleAngle||0,this._map);r.setLatLngs(i),r.pm&&r.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.disable(),this.options.continueDrawing&&this.enable()}}}),j.Circle=j.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle([0,0],It(It({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t,e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng();t=this._map.options.crs===L.CRS.Simple?this._map.distance(e,n):e.distanceTo(n),this.options.minRadiusCircle&&t<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&t>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var n=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(n,"Draw")},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(lt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e,n=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng();e=this._map.options.crs===L.CRS.Simple?this._map.distance(n,r):n.distanceTo(r),this.options.minRadiusCircle&&e<this.options.minRadiusCircle?e=this.options.minRadiusCircle:this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle&&(e=this.options.maxRadiusCircle);var i=It(It({},this.options.pathOptions),{},{radius:e}),u=L.circle(n,i);this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),u.pm&&u.pm._updateHiddenPolyCircle(),this._fireCreate(u),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=t.distanceTo(e);return t.equals(L.latLng([0,0]))||(this.options.minRadiusCircle&&n<this.options.minRadiusCircle?e=Gt(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle&&(e=Gt(this._map,t,e,this.options.maxRadiusCircle))),e},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=t.distanceTo(e);t.equals(L.latLng([0,0]))||(this.options.minRadiusCircle&&n<this.options.minRadiusCircle||this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}}),j.CircleMarker=j.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(t){var e=this;if(L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var n={};L.setOptions(n,this.options.templineStyle),n.radius=0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker([0,0],n),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(r){e.isRelevantMarker(r)&&r.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(lt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(n)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var n=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(n,"Draw")},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&t.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=L.circleMarker(e,this.options.pathOptions);this._setPane(n,"layerPane"),this._finishLayer(n),n.addTo(this._map.pm._getContainingLayer()),n.pm&&this.options.markerEditable&&n.pm.enable(),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));this.options.editable&&(this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?r=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker&&(r=this.options.maxRadiusCircleMarker));var i=At(At({},this.options.pathOptions),{},{radius:r}),u=L.circleMarker(e,i);this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),u.pm&&u.pm._updateHiddenPolyCircle(),this._fireCreate(u),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(this.options.editable){var e=this._centerMarker.getLatLng();if(e.equals(L.latLng([0,0])))return t;var n=this._map.project(e).distanceTo(this._map.project(t));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?t=Gt(this._map,e,t,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(t=Gt(this._map,e,t,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return t},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),n=this._map.project(e),r=L.point(n.x+t,n.y);return this._map.unproject(r).distanceTo(e)}});const Me=function(t){if(!t)throw new Error("geojson is required");var e=[];return ke(t,function(n){(function(r,i){var u=[],m=r.geometry;if(m!==null){switch(m.type){case"Polygon":u=St(m);break;case"LineString":u=[St(m)]}u.forEach(function(_){var b=function(k,R){var N=[];return k.reduce(function(B,V){var Y,nt,at,pt,mt,dt,Et=st([B,V],R);return Et.bbox=(nt=V,at=(Y=B)[0],pt=Y[1],mt=nt[0],dt=nt[1],[at<mt?at:mt,pt<dt?pt:dt,at>mt?at:mt,pt>dt?pt:dt]),N.push(Et),V}),N}(_,r.properties);b.forEach(function(k){k.id=i.length,i.push(k)})})}})(n,e)}),it(e)};var xe=o(1787);function Ae(t,e){var n=St(t),r=St(e);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],u=n[0][1],m=n[1][0],_=n[1][1],b=r[0][0],k=r[0][1],R=r[1][0],N=r[1][1],B=(N-k)*(m-i)-(R-b)*(_-u),V=(R-b)*(u-k)-(N-k)*(i-b),Y=(m-i)*(u-k)-(_-u)*(i-b);if(B===0)return null;var nt=V/B,at=Y/B;return nt>=0&&nt<=1&&at>=0&&at<=1?ot([i+nt*(m-i),u+nt*(_-u)]):null}const Kt=function(t,e){var n={},r=[];if(t.type==="LineString"&&(t=rt(t)),e.type==="LineString"&&(e=rt(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=Ae(t,e);return i&&r.push(i),it(r)}var u=xe();return u.load(Me(e)),ee(Me(t),function(m){ee(u.search(m),function(_){var b=Ae(m,_);if(b){var k=St(b).join(",");n[k]||(n[k]=!0,r.push(b))}})}),it(r)},Ht=function(t,e,n){n===void 0&&(n={});var r=Pt(t),i=Pt(e),u=ft(i[1]-r[1]),m=ft(i[0]-r[0]),_=ft(r[1]),b=ft(i[1]),k=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(m/2),2)*Math.cos(_)*Math.cos(b);return bt(2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k)),n.units)},on=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(Ht(t.slice(0,2),[r,n])>=Ht(t.slice(0,2),[e,i])){var u=(n+i)/2;return[e,u-(r-e)/2,r,u+(r-e)/2]}var m=(e+r)/2;return[m-(i-n)/2,n,m+(i-n)/2,i]};function we(t){var e=[1/0,1/0,-1/0,-1/0];return be(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}we.default=we;const ne=we,sn=function(t,e){e===void 0&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=n==null||isNaN(n)?6:n,r=r==null||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if(typeof n!="number")throw new Error("<precision> must be a number");if(typeof r!="number")throw new Error("<coordinates> must be a number");i!==!1&&i!==void 0||(t=JSON.parse(JSON.stringify(t)));var u=Math.pow(10,n);return be(t,function(m){(function(_,b,k){_.length>k&&_.splice(k,_.length);for(var R=0;R<_.length;R++)_[R]=Math.round(_[R]*b)/b})(m,u,r)}),t};function je(t,e,n){if(n===void 0&&(n={}),n.final===!0)return function(N,B){var V=je(B,N);return V=(V+180)%360}(t,e);var r=Pt(t),i=Pt(e),u=ft(r[0]),m=ft(i[0]),_=ft(r[1]),b=ft(i[1]),k=Math.sin(m-u)*Math.cos(b),R=Math.cos(_)*Math.sin(b)-Math.sin(_)*Math.cos(b)*Math.cos(m-u);return yt(Math.atan2(k,R))}function Ge(t,e,n,r){r===void 0&&(r={});var i=Pt(t),u=ft(i[0]),m=ft(i[1]),_=ft(n),b=gt(e,r.units),k=Math.asin(Math.sin(m)*Math.cos(b)+Math.cos(m)*Math.sin(b)*Math.cos(_));return ot([yt(u+Math.atan2(Math.sin(_)*Math.sin(b)*Math.cos(m),Math.cos(b)-Math.sin(m)*Math.sin(k))),yt(k)],r.properties)}const ln=function(t,e,n){n===void 0&&(n={});var r=ot([1/0,1/0],{dist:1/0}),i=0;return ke(t,function(u){for(var m=St(u),_=0;_<m.length-1;_++){var b=ot(m[_]);b.properties.dist=Ht(e,b,n);var k=ot(m[_+1]);k.properties.dist=Ht(e,k,n);var R=Ht(b,k,n),N=Math.max(b.properties.dist,k.properties.dist),B=je(b,k),V=Ge(e,N,B+90,n),Y=Ge(e,N,B-90,n),nt=Kt(st([V.geometry.coordinates,Y.geometry.coordinates]),st([b.geometry.coordinates,k.geometry.coordinates])),at=null;nt.features.length>0&&((at=nt.features[0]).properties.dist=Ht(e,at,n),at.properties.location=i+Ht(b,at,n)),b.properties.dist<r.properties.dist&&((r=b).properties.index=_,r.properties.location=i),k.properties.dist<r.properties.dist&&((r=k).properties.index=_+1,r.properties.location=i+R),at&&at.properties.dist<r.properties.dist&&((r=at).properties.index=_),i+=R}}),r};function Ne(t,e){var n=[],r=xe();return ke(e,function(i){if(n.forEach(function(_,b){_.id=b}),n.length){var u=r.search(i);if(u.features.length){var m=Ue(i,u);n=n.filter(function(_){return _.id!==m.id}),r.remove(m),ee(Ce(m,i),function(_){n.push(_),r.insert(_)})}}else(n=Ce(t,i).features).forEach(function(_){_.bbox||(_.bbox=on(ne(_)))}),r.load(it(n))}),it(n)}function Ce(t,e){var n=[],r=St(t)[0],i=St(t)[t.geometry.coordinates.length-1];if(Pe(r,Pt(e))||Pe(i,Pt(e)))return it([t]);var u=xe(),m=Me(t);u.load(m);var _=u.search(e);if(!_.features.length)return it([t]);var b=Ue(e,_),k=function(R,N,B){var V=B;return ee(R,function(Y,nt){V=nt===0&&B===void 0?Y:N(V,Y,nt)}),V}(m,function(R,N,B){var V=St(N)[1],Y=Pt(e);return B===b.id?(R.push(Y),n.push(st(R)),Pe(Y,V)?[Y]:[Y,V]):(R.push(V),R)},[r]);return k.length>1&&n.push(st(k)),it(n)}function Ue(t,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var n,r=1/0;return ee(e,function(i){var u=ln(i,t).properties.dist;u<r&&(n=i,r=u)}),n}function Pe(t,e){return t[0]===e[0]&&t[1]===e[1]}const hn=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=Yt(t),r=Yt(e);if(n!=="LineString")throw new Error("line must be LineString");if(r==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(r==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=sn(e,{precision:7});switch(r){case"Point":return Ce(t,i);case"MultiPoint":return Ne(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ne(t,Kt(t,i))}};function ce(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Pt(t),i=jt(e),u=i.type,m=e.bbox,_=i.coordinates;if(m&&function(B,V){return V[0]<=B[0]&&V[1]<=B[1]&&V[2]>=B[0]&&V[3]>=B[1]}(r,m)===!1)return!1;u==="Polygon"&&(_=[_]);for(var b=!1,k=0;k<_.length&&!b;k++)if(ze(r,_[k][0],n.ignoreBoundary)){for(var R=!1,N=1;N<_[k].length&&!R;)ze(r,_[k][N],!n.ignoreBoundary)&&(R=!0),N++;R||(b=!0)}return b}function ze(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,u=e.length-1;i<e.length;u=i++){var m=e[i][0],_=e[i][1],b=e[u][0],k=e[u][1];if(t[1]*(m-b)+_*(b-t[0])+k*(t[0]-m)==0&&(m-t[0])*(b-t[0])<=0&&(_-t[1])*(k-t[1])<=0)return!n;_>t[1]!=k>t[1]&&t[0]<(b-m)*(t[1]-_)/(k-_)+m&&(r=!r)}return r}function un(t,e,n,r,i){var u=n[0],m=n[1],_=t[0],b=t[1],k=e[0],R=e[1],N=k-_,B=R-b,V=(n[0]-_)*B-(n[1]-b)*N;if(i!==null){if(Math.abs(V)>i)return!1}else if(V!==0)return!1;return r?r==="start"?Math.abs(N)>=Math.abs(B)?N>0?_<u&&u<=k:k<=u&&u<_:B>0?b<m&&m<=R:R<=m&&m<b:r==="end"?Math.abs(N)>=Math.abs(B)?N>0?_<=u&&u<k:k<u&&u<=_:B>0?b<=m&&m<R:R<m&&m<=b:r==="both"&&(Math.abs(N)>=Math.abs(B)?N>0?_<u&&u<k:k<u&&u<_:B>0?b<m&&m<R:R<m&&m<b):Math.abs(N)>=Math.abs(B)?N>0?_<=u&&u<=k:k<=u&&u<=_:B>0?b<=m&&m<=R:R<=m&&m<=b}const re=function(t,e,n){n===void 0&&(n={});for(var r=Pt(t),i=St(e),u=0;u<i.length-1;u++){var m=!1;if(n.ignoreEndVertices&&(u===0&&(m="start"),u===i.length-2&&(m="end"),u===0&&u+1===i.length-1&&(m="both")),un(i[u],i[u+1],r,m,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1};function cn(t,e){var n=jt(t),r=jt(e),i=n.type,u=r.type,m=n.coordinates,_=r.coordinates;switch(i){case"Point":if(u==="Point")return Ee(m,_);throw new Error("feature2 "+u+" geometry not supported");case"MultiPoint":switch(u){case"Point":return function(b,k){var R,N=!1;for(R=0;R<b.coordinates.length;R++)if(Ee(b.coordinates[R],k.coordinates)){N=!0;break}return N}(n,r);case"MultiPoint":return function(b,k){for(var R=0,N=k.coordinates;R<N.length;R++){for(var B=N[R],V=!1,Y=0,nt=b.coordinates;Y<nt.length;Y++)if(Ee(B,nt[Y])){V=!0;break}if(!V)return!1}return!0}(n,r);default:throw new Error("feature2 "+u+" geometry not supported")}case"LineString":switch(u){case"Point":return re(r,n,{ignoreEndVertices:!0});case"LineString":return function(b,k){for(var R=!1,N=0,B=k.coordinates;N<B.length;N++){var V=B[N];if(re({type:"Point",coordinates:V},b,{ignoreEndVertices:!0})&&(R=!0),!re({type:"Point",coordinates:V},b,{ignoreEndVertices:!1}))return!1}return R}(n,r);case"MultiPoint":return function(b,k){for(var R=!1,N=0,B=k.coordinates;N<B.length;N++){var V=B[N];if(re(V,b,{ignoreEndVertices:!0})&&(R=!0),!re(V,b))return!1}return!!R}(n,r);default:throw new Error("feature2 "+u+" geometry not supported")}case"Polygon":switch(u){case"Point":return ce(r,n,{ignoreBoundary:!0});case"LineString":return function(b,k){var R=!1,N=0,B=ne(b),V=ne(k);if(!Fe(B,V))return!1;for(;N<k.coordinates.length-1;N++)if(ce({type:"Point",coordinates:pn(k.coordinates[N],k.coordinates[N+1])},b,{ignoreBoundary:!0})){R=!0;break}return R}(n,r);case"Polygon":return function(b,k){if(b.type==="Feature"&&b.geometry===null||k.type==="Feature"&&k.geometry===null)return!1;var R=ne(b),N=ne(k);if(!Fe(R,N))return!1;for(var B=jt(k).coordinates,V=0,Y=B;V<Y.length;V++)for(var nt=0,at=Y[V];nt<at.length;nt++)if(!ce(at[nt],b))return!1;return!0}(n,r);case"MultiPoint":return function(b,k){for(var R=0,N=k.coordinates;R<N.length;R++)if(!ce(N[R],b,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+u+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Fe(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Ee(t,e){return t[0]===e[0]&&t[1]===e[1]}function pn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var dn=o(2676),Ve=o.n(dn);function pe(t){var e={type:"Feature"};return e.geometry=t,e}function de(t){return t.type==="Feature"?t.geometry:t}function Ke(t){return t.geometry.coordinates}function He(t){return pe({type:"Polygon",coordinates:t})}function qe(t){return pe({type:"MultiPolygon",coordinates:t})}function Je(t){return Array.isArray(t)?1+Je(t[0]):-1}function gn(t){t instanceof L.Polyline&&(t=t.toGeoJSON(15));var e=Ke(t),n=Je(e),r=[];return n>1?e.forEach(function(i){r.push(function(u){return pe({type:"LineString",coordinates:u})}(i))}):r.push(t),r}function fn(t){var e=[];return t.eachLayer(function(n){e.push(Ke(n.toGeoJSON(15)))}),function(n){return pe({type:"MultiLineString",coordinates:n})}(e)}function mn(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var u,m,_=[],b=!0,k=!1;try{for(i=i.call(n);!(b=(u=i.next()).done)&&(_.push(u.value),!r||_.length!==r);b=!0);}catch(R){k=!0,m=R}finally{try{b||i.return==null||i.return()}finally{if(k)throw m}}return _}}(t,e)||function(n,r){if(!!n){if(typeof n=="string")return Ye(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ye(n,r)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ye(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _n(t){return function(e){if(Array.isArray(e))return Se(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(!!e){if(typeof e=="string")return Se(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Se(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}j.Cut=j.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t=this;if(this._editedLayers=[],this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect)){var e=this._layer.getLatLngs(),n=L.polygon(e,this.options.pathOptions);n._latlngInfos=this._layer._latlngInfo,this.cut(n),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(r){var i=r.layer,u=r.originalLayer;t._fireCut(u,i,u),t._fireCut(t._map,i,u),u.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}},cut:function(t){var e=this,n=this._map._layers,r=t._latlngInfos||[];Object.keys(n).map(function(i){return n[i]}).filter(function(i){return i.pm}).filter(function(i){return!i._pmTempLayer}).filter(function(i){return!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1}).filter(function(i){return i instanceof L.Polyline}).filter(function(i){return i!==t}).filter(function(i){return i.pm.options.allowCutting}).filter(function(i){return!(e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0)||e.options.layersToCut.indexOf(i)>-1}).filter(function(i){return!e._layerGroup.hasLayer(i)}).filter(function(i){try{var u=!!Kt(t.toGeoJSON(15),i.toGeoJSON(15)).features.length>0;return u||i instanceof L.Polyline&&!(i instanceof L.Polygon)?u:(m=t.toGeoJSON(15),_=i.toGeoJSON(15),b=de(m),k=de(_),!((R=Ve().intersection(b.coordinates,k.coordinates)).length===0||!(R.length===1?He(R[0]):qe(R))))}catch{return i instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var m,_,b,k,R}).forEach(function(i){var u;if(i instanceof L.Polygon){var m=(u=L.polygon(i.getLatLngs())).getLatLngs();r.forEach(function(B){if(B&&B.snapInfo){var V=B.latlng,Y=e._calcClosestLayer(V,[u]);if(Y&&Y.segment&&Y.distance<e.options.snapDistance){var nt=Y.segment;if(nt&&nt.length===2){var at=L.PM.Utils._getIndexFromSegment(m,nt),pt=at.indexPath,mt=at.parentPath,dt=at.newIndex;(pt.length>1?ct()(m,mt):m).splice(dt,0,V)}}}})}else u=i;var _=e._cutLayer(t,u),b=L.geoJSON(_,i.options);if(b.getLayers().length===1){var k=b.getLayers();b=mn(k,1)[0]}e._setPane(b,"layerPane");var R=b.addTo(e._map.pm._getContainingLayer());if(R.pm.enable(i.pm.options),R.pm.disable(),i._pmTempLayer=!0,t._pmTempLayer=!0,i.remove(),i.removeFrom(e._map.pm._getContainingLayer()),t.remove(),t.removeFrom(e._map.pm._getContainingLayer()),R.getLayers&&R.getLayers().length===0&&e._map.pm.removeLayer({target:R}),R instanceof L.LayerGroup&&R.eachLayer(function(B){e._addDrawnLayerProp(B)}),e._addDrawnLayerProp(R),e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0){var N=e.options.layersToCut.indexOf(i);N>-1&&e.options.layersToCut.splice(N,1)}e._editedLayers.push({layer:R,originalLayer:i})})},_cutLayer:function(t,e){var n,r,i,u,m,_,b=L.geoJSON();if(e instanceof L.Polygon)r=e.toGeoJSON(15),i=t.toGeoJSON(15),u=de(r),m=de(i),n=(_=Ve().difference(u.coordinates,m.coordinates)).length===0?null:_.length===1?He(_[0]):qe(_);else{var k=gn(e);k.forEach(function(R){var N=hn(R,t.toGeoJSON(15));(N&&N.features.length>0?L.geoJSON(N):L.geoJSON(R)).getLayers().forEach(function(B){cn(t.toGeoJSON(15),B.toGeoJSON(15))||B.addTo(b)})}),n=k.length>1?fn(b):b.toGeoJSON(15)}return n},_change:L.Util.falseFn}),j.Text=j.extend({initialize:function(t){this._map=t,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}},_createMarker:function(t){var e;if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var n=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(e=this.options.textOptions)!==null&&e!==void 0&&e.className){var r,i=this.options.textOptions.className.split(" ");(r=this.textArea.classList).add.apply(r,_n(i))}var u=this._createTextIcon(this.textArea),m=new L.Marker(n,{textMarker:!0,_textMarkerOverPM:!0,icon:u});if(this._setPane(m,"markerPane"),this._finishLayer(m),m.pm||(m.options.draggable=!1),m.addTo(this._map.pm._getContainingLayer()),m.pm){var _,b,k,R,N;m.pm.textArea=this.textArea,L.setOptions(m.pm,{removeIfEmpty:(_=(b=this.options.textOptions)===null||b===void 0?void 0:b.removeIfEmpty)===null||_===void 0||_});var B=(k=(R=this.options.textOptions)===null||R===void 0?void 0:R.focusAfterDraw)===null||k===void 0||k;m.pm._createTextMarker(B),(N=this.options.textOptions)!==null&&N!==void 0&&N.text&&m.pm.setText(this.options.textOptions.text)}this._fireCreate(m),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var t=document.createElement("textarea");return t.autofocus=!0,t.readOnly=!0,t.classList.add("pm-textarea","pm-disabled"),t},_createTextIcon:function(t){return L.divIcon({className:"pm-text-marker",html:t})}});const yn={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ut(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var t=this._getDOMElem();t&&(Ut(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(t)):L.DomEvent.on(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,Ut(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var t=this._getDOMElem();t&&(Ut(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(t)):L.DomEvent.off(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(t){var e={originalEvent:t,target:this._layer},n=t.touches?t.touches[0]:t;return e.containerPoint=this._map.mouseEventToContainerPoint(n),e.latlng=this._map.containerPointToLatLng(e.containerPoint),this._dragMixinOnMouseDown(e),!1},_simulateMouseMoveEvent:function(t){var e={originalEvent:t,target:this._layer},n=t.touches?t.touches[0]:t;return e.containerPoint=this._map.mouseEventToContainerPoint(n),e.latlng=this._map.containerPointToLatLng(e.containerPoint),this._dragMixinOnMouseMove(e),!1},_simulateMouseUpEvent:function(t){var e={originalEvent:t,target:this._layer};return t.type.indexOf("touch")===-1&&(e.containerPoint=this._map.mouseEventToContainerPoint(t),e.latlng=this._map.containerPointToLatLng(e.containerPoint)),this._dragMixinOnMouseUp(e),!1},_dragMixinOnMouseDown:function(t){if(!(t.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(t);var e=t._fromLayerSync,n=this._syncLayers("_dragMixinOnMouseDown",t);this._layer instanceof L.Marker&&(!this.options.snappable||e||n?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||e||n?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(t){this._overwriteEventIfItComesFromMarker(t);var e=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",t),this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=t.latlng),this._onLayerDrag(t),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(t){var e=this,n=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",t),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){e._dragging=!1,n&&L.DomUtil.removeClass(n,"leaflet-pm-dragging"),e._fireDragEnd(),e._fireEdit()},10),!0)},_onLayerDrag:function(t){var e=t.latlng,n=e.lat-this._tempDragCoord.lat,r=e.lng-this._tempDragCoord.lng,i=function R(N){return N.map(function(B){if(Array.isArray(B))return R(B);var V={lat:B.lat+n,lng:B.lng+r};return(B.alt||B.alt===0)&&(V.alt=B.alt),V})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var u=i([this._layer.getLatLng()]);this._layer.setLatLng(u[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var m=this._layer.getLatLng();this._layer._snapped&&(m=this._layer._orgLatLng);var _=i([m]);this._layer.setLatLng(_[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var b=i([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(b),this._fireChange(this._layer.getBounds(),"Edit")}else{var k=i(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=e,t.layer=this._layer,this._fireDrag(t)},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image?t=this._layer._image:this._layer._icon&&(t=this._layer._icon),t},_overwriteEventIfItComesFromMarker:function(t){t.target.getLatLng&&(!t.target._radius||t.target._radius<=10)&&(t.containerPoint=this._map.mouseEventToContainerPoint(t.originalEvent),t.latlng=this._map.containerPointToLatLng(t.containerPoint))},_syncLayers:function(t,e){var n=this;if(this.enabled())return!1;if(!e._fromLayerSync&&this._layer===e.target&&this.options.syncLayersOnDrag){e._fromLayerSync=!0;var r=[];if(L.Util.isArray(this.options.syncLayersOnDrag))r=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(m){m instanceof L.LayerGroup&&(r=r.concat(m.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var i in this._parentLayerGroup){var u=this._parentLayerGroup[i];u.pm&&(r=u.pm.getLayers(!0))}return L.Util.isArray(r)&&r.length>0&&(r=r.filter(function(m){return!!m.pm}).filter(function(m){return!!m.pm.options.draggable})).forEach(function(m){m!==n._layer&&m.pm[t]&&(m._snapped=!1,m.pm[t](e))}),r.length>0}return!1},_stopDOMImageDrag:function(t){return t.preventDefault(),!1}};function Xe(t,e,n){var r=n.getMaxZoom();if(r===1/0&&(r=n.getZoom()),L.Util.isArray(t)){var i=[];return t.forEach(function(u){i.push(Xe(u,e,n))}),i}return t instanceof L.LatLng?function(u,m,_,b){return _.unproject(m.transform(_.project(u,b)),b)}(t,e,n,r):null}function Xt(t,e){e instanceof L.Layer&&(e=e.getLatLng());var n=t.getMaxZoom();return n===1/0&&(n=t.getZoom()),t.project(e,n)}function ge(t,e){var n=t.getMaxZoom();return n===1/0&&(n=t.getZoom()),t.unproject(e,n)}var vn={_onRotateStart:function(t){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Xt(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Xt(this._map,t.target.getLatLng()),this._initialRotateLatLng=Nt(this._layer),this._startAngle=this.getAngle();var e=Nt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,e),this._fireRotationStart(this._map,e)},_onRotate:function(t){var e=Xt(this._map,t.target.getLatLng()),n=this._rotationStartPoint,r=this._rotationOriginPoint,i=Math.atan2(e.y-r.y,e.x-r.x)-Math.atan2(n.y-r.y,n.x-r.x);this._layer.setLatLngs(this._rotateLayer(i,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var u=this;(function k(R){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(B>-1&&N.push(B),L.Util.isArray(R[0]))R.forEach(function(Y,nt){return k(Y,N.slice(),nt)});else{var V=ct()(u._markers,N);R.forEach(function(Y,nt){V[nt].setLatLng(Y)})}})(this._layer.getLatLngs());var m=Nt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(i,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var _=180*i/Math.PI,b=(_=_<0?_+360:_)+this._startAngle;this._setAngle(b),this._rotationLayer.pm._setAngle(b),this._fireRotation(this._rotationLayer,_,m),this._fireRotation(this._map,_,m),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var t=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var e=Nt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Nt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,t,e),this._fireRotationEnd(this._map,t,e),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(t,e,n,r,i){var u=Xt(i,n);return this._matrix=r.clone().rotate(t,u).flip(),Xe(e,this._matrix,i)},_setAngle:function(t){t=t<0?t+360:t,this._angle=t%360},_getRotationCenter:function(){var t=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),e=t.getCenter();return t.removeFrom(this._layer._map),e},enableRotate:function(){this.options.allowRotation?(this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}).addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Nt(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(t){var e=this.getAngle(),n=this._layer.getLatLngs(),r=t*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(r,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+t),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(r,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var i=this.getAngle()-e;i=i<0?i+360:i,this._startAngle=e,this._fireRotation(this._layer,i,n,this._layer),this._fireRotation(this._map,i,n,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(t){var e=t-this.getAngle();this.rotateLayer(e)},getAngle:function(){return this._angle||0}};const Ln=vn,Mt=L.Class.extend({includes:[yn,w,Ln,et],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(t,e){var n=e.target,r={layer:this._layer,marker:n,event:e},i="";return t==="move"?i="moveVertexValidation":t==="add"?i="addVertexValidation":t==="remove"&&(i="removeVertexValidation"),this.options[i]&&typeof this.options[i]=="function"&&!this.options[i](r)?(t==="move"&&(n._cancelDragEventChain=n.getLatLng()),!1):(n._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(t){return!t._cancelDragEventChain||(t._latlng=t._cancelDragEventChain,t.update(),!1)},_vertexValidationDragEnd:function(t){return!t._cancelDragEventChain||(t._cancelDragEventChain=null,!1)}});function fe(t){return function(e){if(Array.isArray(e))return De(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(!!e){if(typeof e=="string")return De(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function De(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Mt.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(n){return e._initLayer(n)}),this._layerGroup.on("layeradd",L.Util.throttle(function(n){if(!n.layer._pmTempLayer){e._layers=e.getLayers();var r=e._layers.filter(function(i){return!i.pm._parentLayerGroup||!(e._layerGroup._leaflet_id in i.pm._parentLayerGroup)});r.forEach(function(i){e._initLayer(i)}),r.length>0&&e._getMap()&&e._getMap().pm.globalEditModeEnabled()&&e.enabled()&&e.enable(e.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(n){e._removeLayerFromGroup(n.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(n){n.target._pmTempLayer||(e._layers=e.getLayers())},100,this),this)},enable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(n){n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.enable(t,e)):n.pm.enable(t)})},disable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(e){e instanceof L.LayerGroup?t.indexOf(e._leaflet_id)===-1&&(t.push(e._leaflet_id),e.pm.disable(t)):e.pm.disable()})},enabled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers());var e=this._layers.find(function(n){return n instanceof L.LayerGroup?t.indexOf(n._leaflet_id)===-1&&(t.push(n._leaflet_id),n.pm.enabled(t)):n.pm.enabled()});return!!e},toggleEdit:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(n){n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.toggleEdit(t,e)):n.pm.toggleEdit(t)})},_initLayer:function(t){var e=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[e]=this._layerGroup},_removeLayerFromGroup:function(t){if(t.pm&&t.pm._layerGroup){var e=L.Util.stamp(this._layerGroup);delete t.pm._layerGroup[e]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var t=this._layers.find(function(e){return e.pm.dragging()});return!!t}return!1},getOptions:function(){return this.options},_getMap:function(){var t;return this._map||((t=this._layers.find(function(e){return!!e._map}))===null||t===void 0?void 0:t._map)||null},getLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],i=[];return t?this._layerGroup.getLayers().forEach(function(u){i.push(u),u instanceof L.LayerGroup&&r.indexOf(u._leaflet_id)===-1&&(r.push(u._leaflet_id),i=i.concat(u.pm.getLayers(!0,!0,!0,r)))}):i=this._layerGroup.getLayers(),n&&(i=i.filter(function(u){return!(u instanceof L.LayerGroup)})),e&&(i=(i=(i=i.filter(function(u){return!!u.pm})).filter(function(u){return!u._pmTempLayer})).filter(function(u){return!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1})),i},setOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this.options=t,this._layers.forEach(function(n){n.pm&&(n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.setOptions(t,e)):n.pm.setOptions(t))})}}),Mt.Marker=Mt.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){var e=t.target;e.remove(),this._fireRemove(e),this._fireRemove(this._map,e)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});const bn={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.applyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.applyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(fe(this._markerGroup.getLayers()),fe(this.markerCache));this.markerCache=t.filter(function(e,n,r){return r.indexOf(e)===n})},renderLimits:function(t){var e=this;this.markerCache.forEach(function(n){t.includes(n)?e._markerGroup.addLayer(n):e._markerGroup.removeLayer(n)})},applyLimitFilters:function(t){var e=t.latlng,n=e===void 0?{lat:0,lng:0}:e;if(!this._preventRenderMarkers){var r=fe(this._filterClosestMarkers(n));this.renderLimits(r)}},_filterClosestMarkers:function(t){var e=fe(this.markerCache),n=this.options.limitMarkersToCount;return e.sort(function(r,i){return r._latlng.distanceTo(t)-i._latlng.distanceTo(t)}),e.filter(function(r,i){return!(n>-1)||i<n})},_preventRenderMarkers:!1,_preventRenderingMarkers:function(t){this._preventRenderMarkers=!!t}};function kn(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var u,m,_=[],b=!0,k=!1;try{for(i=i.call(n);!(b=(u=i.next()).done)&&(_.push(u.value),!r||_.length!==r);b=!0);}catch(R){k=!0,m=R}finally{try{b||i.return==null||i.return()}finally{if(k)throw m}}return _}}(t,e)||function(n,r){if(!!n){if(typeof n=="string")return $e(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $e(n,r)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $e(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mn(t){return function(e){if(Array.isArray(e))return Oe(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(!!e){if(typeof e=="string")return Oe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Oe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Mt.Line=Mt.extend({includes:[bn],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this.hasSelfIntersection()&&L.DomUtil.removeClass(t,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var t=this,e=this._map,n=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,this._markers=function r(i){if(Array.isArray(i[0]))return i.map(r,t);var u=i.map(t._createMarker,t);return t.options.hideMiddleMarkers!==!0&&i.map(function(m,_){var b=t.isPolygon()?(_+1)%i.length:_+1;return t._createMiddleMarker(u[_],u[b])}),u}(n),this.filterMarkerGroup(),e.addLayer(this._markerGroup)},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this.options.rotate?(e.on("dragstart",this._onRotateStart,this),e.on("drag",this._onRotate,this),e.on("dragend",this._onRotateEnd,this)):(e.on("click",this._onVertexClick,this),e.on("dragstart",this._onMarkerDragStart,this),e.on("move",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(e),e},_createMiddleMarker:function(t,e){if(!t||!e)return!1;var n=L.PM.Utils.calcMiddleLatLng(this._map,t.getLatLng(),e.getLatLng()),r=this._createMarker(n),i=L.divIcon({className:"marker-icon marker-icon-middle"});return r.setIcon(i),r.leftM=t,r.rightM=e,t._middleMarkerNext=r,e._middleMarkerPrev=r,r.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),r.on("movestart",this._onMiddleMarkerMoveStart,this),r},_onMiddleMarkerClick:function(t){var e=t.target;if(this._vertexValidation("add",t)){var n=L.divIcon({className:"marker-icon"});e.setIcon(n),this._addMarker(e,e.leftM,e.rightM)}},_onMiddleMarkerMoveStart:function(t){var e=t.target;e.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",t)?(e._dragging=!0,this._addMarker(e,e.leftM,e.rightM)):e.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(t){var e=t.target;this._vertexValidationDrag(e)},_onMiddleMarkerMoveEnd:function(t){var e=t.target;if(e.off("move",this._onMiddleMarkerMovePrevent,this),e.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(e)){var n=L.divIcon({className:"marker-icon"});e.setIcon(n),setTimeout(function(){delete e._dragging},100)}},_addMarker:function(t,e,n){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var r=t.getLatLng(),i=this._layer._latlngs;delete t.leftM,delete t.rightM;var u=L.PM.Utils.findDeepMarkerIndex(this._markers,e),m=u.indexPath,_=u.index,b=u.parentPath,k=m.length>1?ct()(i,b):i,R=m.length>1?ct()(this._markers,b):this._markers;k.splice(_+1,0,r),R.splice(_+1,0,t),this._layer.setLatLngs(i),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,n)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(t,L.PM.Utils.findDeepMarkerIndex(this._markers,t).indexPath,r),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return wt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;t?this._flashLayer():(e.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(wt(this._layer.toGeoJSON(15)))}else e.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1},200)},_updateDisabledMarkerStyle:function(t,e){var n=this;t.forEach(function(r){Array.isArray(r)?n._updateDisabledMarkerStyle(r,e):r._icon&&(e&&!n._checkMarkerAllowedToDrag(r)?L.DomUtil.addClass(r._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(r._icon,"vertexmarker-disabled"))})},_removeMarker:function(t){var e=t.target;if(this._vertexValidation("remove",t)){if(!this.options.allowSelfIntersection){var n=this._layer.getLatLngs();this._coordsBeforeEdit=JSON.parse(JSON.stringify(n))}var r=this._layer.getLatLngs(),i=L.PM.Utils.findDeepMarkerIndex(this._markers,e),u=i.indexPath,m=i.index,_=i.parentPath;if(u){var b=u.length>1?ct()(r,_):r,k=u.length>1?ct()(this._markers,_):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(b.length<=2||this.isPolygon()&&b.length<=3)){b.splice(m,1),this._layer.setLatLngs(r),this.isPolygon()&&b.length<=2&&b.splice(0,b.length);var R=!1;if(b.length<=1&&(b.splice(0,b.length),this._layer.setLatLngs(r),this.disable(),this.enable(this.options),R=!0),_t(r)&&this._layer.remove(),r=Wt(r),this._layer.setLatLngs(r),this._markers=Wt(this._markers),!R&&(k=u.length>1?ct()(this._markers,_):this._markers,e._middleMarkerPrev&&this._markerGroup.removeLayer(e._middleMarkerPrev),e._middleMarkerNext&&this._markerGroup.removeLayer(e._middleMarkerNext),this._markerGroup.removeLayer(e),k)){var N,B;if(this.isPolygon()?(N=(m+1)%k.length,B=(m+(k.length-1))%k.length):(B=m-1<0?void 0:m-1,N=m+1>=k.length?void 0:m+1),N!==B){var V=k[B],Y=k[N];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(V,Y)}k.splice(m,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(e,u),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),n=t.getLatLng(),r=L.PM.Utils.findDeepMarkerIndex(this._markers,t),i=r.indexPath,u=r.index,m=r.parentPath;(i.length>1?ct()(e,m):e).splice(u,1,n),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=L.PM.Utils.findDeepMarkerIndex(this._markers,t),n=e.indexPath,r=e.index,i=e.parentPath,u=n.length>1?ct()(this._markers,i):this._markers,m=(r+1)%u.length;return{prevMarker:u[(r+(u.length-1))%u.length],nextMarker:u[m]}},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),n=e.prevMarker,r=e.nextMarker,i=L.polyline([n.getLatLng(),t.getLatLng()]),u=L.polyline([t.getLatLng(),r.getLatLng()]),m=Kt(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,_=Kt(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?_+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(m+=1),!(m<=2&&_<=2)},_onMarkerDragStart:function(t){var e=t.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",t)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireMarkerDragStart(t,n),this.options.allowSelfIntersection||(this._coordsBeforeEdit=this._layer.getLatLngs()),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null}},_onMarkerDrag:function(t){var e=t.target;if(this._vertexValidationDrag(e)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e),r=n.indexPath,i=n.index,u=n.parentPath;if(r){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var m=r.length>1?ct()(this._markers,u):this._markers,_=(i+1)%m.length,b=(i+(m.length-1))%m.length,k=e.getLatLng(),R=m[b].getLatLng(),N=m[_].getLatLng();if(e._middleMarkerNext){var B=L.PM.Utils.calcMiddleLatLng(this._map,k,N);e._middleMarkerNext.setLatLng(B)}if(e._middleMarkerPrev){var V=L.PM.Utils.calcMiddleLatLng(this._map,k,R);e._middleMarkerPrev.setLatLng(V)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(t,r),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(t){var e=t.target;if(this._vertexValidationDragEnd(e)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath,r=this.hasSelfIntersection();r&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(r=!1);var i=!this.options.allowSelfIntersection&&r;if(this._fireMarkerDragEnd(t,n,i),i)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(t,n);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(t){var e=t.target;if(!e._dragging){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireVertexClick(t,n)}}}),Mt.Polygon=Mt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),n=e.prevMarker,r=e.nextMarker,i=L.polyline([n.getLatLng(),t.getLatLng()]),u=L.polyline([t.getLatLng(),r.getLatLng()]),m=Kt(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,_=Kt(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length;return!(m<=2&&_<=2)}}),Mt.Rectangle=Mt.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this,e=this._map,n=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=n.map(this._createMarker,this);var r=kn(this._markers,1);this._cornerMarkers=r[0],this._layer.getLatLngs()[0].forEach(function(i,u){var m=t._cornerMarkers.find(function(_){return _._index===u});m&&m.setLatLng(i)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._origLatLng=t,n._index=e,n._pmTempLayer=!0,this._markerGroup.addLayer(n),n},_addMarkerEvents:function(){var t=this;this._markers[0].forEach(function(e){e.on("dragstart",t._onMarkerDragStart,t),e.on("drag",t._onMarkerDrag,t),e.on("dragend",t._onMarkerDragEnd,t),t.options.preventMarkerRemoval||e.on("contextmenu",t._removeMarker,t)})},_removeMarker:function(){return null},_onMarkerDragStart:function(t){if(this._vertexValidation("move",t)){var e=t.target,n=this._cornerMarkers;e._oppositeCornerLatLng=n.find(function(r){return r._index===(e._index+2)%4}).getLatLng(),e._snapped=!1,this._fireMarkerDragStart(t)}},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&e._index!==void 0&&(this._adjustRectangleForMarkerMove(e),this._fireMarkerDrag(t),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._cornerMarkers.forEach(function(n){delete n._oppositeCornerLatLng}),this._fireMarkerDragEnd(t),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=L.PM.Utils._getRotatedRectangle(t.getLatLng(),t._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(e),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var t=this,e=this._layer.getLatLngs()[0];e&&e.length!==4&&e.length>0?(e.forEach(function(n,r){t._cornerMarkers[r].setLatLng(n)}),this._cornerMarkers.slice(e.length).forEach(function(n){n.setLatLng(e[0])})):e&&e.length?this._cornerMarkers.forEach(function(n){n.setLatLng(e[n._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this._angle||0,this._map)}}),Mt.Circle=Mt.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(r),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(t,e){var n=t.getLatLng(),r=e.getLatLng();this._hintline=L.polyline([n,r],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this),e.on("dragstart",this._onCircleDragStart,this),e.on("drag",this._onCircleDrag,this),e.on("dragend",this._onCircleDragEnd,this),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){if(!t.target._cancelDragEventChain){var e=t.latlng;this._layer.setLatLng(e);var n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._outerMarker._latlng=r,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);this.options.minRadiusCircle&&n<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(n),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_disableSnapping:function(){var t=this;this._markers.forEach(function(e){e.off("move",t._syncHintLine,t),e.off("move",t._syncCircleRadius,t),e.off("drag",t._handleSnapping,t),e.off("dragend",t._cleanupSnapping,t)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(t))},_onCircleDragStart:function(t){this._vertexValidationDrag(t.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(t){this._vertexValidationReset||this._fireDrag(t)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var t=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!t).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!t),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(t,e){var n=this._map.project(t),r=L.point(n.x+e,n.y);return this._map.unproject(r)},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);return this.options.minRadiusCircle&&n<this.options.minRadiusCircle?e=Gt(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle&&(e=Gt(this._map,t,e,this.options.maxRadiusCircle)),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);(this.options.minRadiusCircle&&n<this.options.minRadiusCircle||this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),Mt.CircleMarker=Mt.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(r),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var n=this._map.project(t),r=L.point(n.x+e,n.y);return this._map.unproject(r)},_createHintLine:function(t,e){var n=t.getLatLng(),r=e.getLatLng();this._hintline=L.polyline([n,r],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"):e.dragging.disable(),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_moveCircle:function(){var t=this._centerMarker.getLatLng();this._layer.setLatLng(t);var e=this._layer._radius,n=this._getLatLngOnCircle(t,e);this._outerMarker._latlng=n,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,n=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(n),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(n),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;e instanceof L.Marker&&!this._vertexValidationDrag(e)||this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var e=t.target;this._vertexValidationDragEnd(e)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(t))},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t=this._layer._map||this._map;if(t){var e=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),t,this._layer.getLatLng()),n=L.circle(this._layer.getLatLng(),this._layer.options);n.setRadius(e);var r=t&&t.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(n,200,!r).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(n,200,!r),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));return this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?e=Gt(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,t)):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(e=Gt(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,t))),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),Mt.ImageOverlay=Mt.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),Mt.Text=Mt.extend({_shape:"Text",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var t=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),t.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var t=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,e=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(t,"px"),this.textArea.style.width="".concat(e,"px"),this._fireTextChange(this.getText())},_disableOnBlur:function(){var t=this;this._disableOnBlurActive=!0,setTimeout(function(){t.enabled()&&L.DomEvent.on(document,"click",t._documentClick,t)},100)},_documentClick:function(t){t.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._hasFocus=t.type==="focus",this._hasFocus?this._applyFocus():this._removeFocus()},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(t){this.textArea.value=t,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var t,e=this.options.className.split(" ");(t=this.textArea.classList).add.apply(t,Mn(e))}var n=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(n),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),t&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(t){t.preventDefault()}});var Re=function(t,e,n,r,i,u){this._matrix=[t,e,n,r,i,u]};Re.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},Re.prototype={transform:function(t){return this._transform(t.clone())},_transform:function(t){var e=this._matrix,n=t.x,r=t.y;return t.x=e[0]*n+e[1]*r+e[4],t.y=e[2]*n+e[3]*r+e[5],t},untransform:function(t){var e=this._matrix;return new L.Point((t.x/e[0]-e[4])/e[0],(t.y/e[2]-e[5])/e[2])},clone:function(){var t=this._matrix;return new L.PM.Matrix(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(t){return t===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof t=="number"?(e=t,n=t):(e=t.x,n=t.y),this._add(1,0,0,1,e,n));var e,n},scale:function(t,e){return t===void 0?new L.Point(this._matrix[0],this._matrix[3]):(e=e||L.point(0,0),typeof t=="number"?(n=t,r=t):(n=t.x,r=t.y),this._add(n,0,0,r,e.x,e.y)._add(1,0,0,1,-e.x,-e.y));var n,r},rotate:function(t,e){var n=Math.cos(t),r=Math.sin(t);return e=e||new L.Point(0,0),this._add(n,r,-r,n,e.x,e.y)._add(1,0,0,1,-e.x,-e.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(t,e,n,r,i,u){var m,_=[[],[],[]],b=this._matrix,k=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],R=[[t,n,i],[e,r,u],[0,0,1]];t&&t instanceof L.PM.Matrix&&(R=[[(b=t._matrix)[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(var N=0;N<3;N+=1)for(var B=0;B<3;B+=1){m=0;for(var V=0;V<3;V+=1)m+=k[N][V]*R[V][B];_[N][B]=m}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};const xn=Re;var wn={calcMiddleLatLng:function(t,e,n){var r=t.project(e),i=t.project(n);return t.unproject(r._add(i)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer(function(n){(n instanceof L.Polyline||n instanceof L.Marker||n instanceof L.Circle||n instanceof L.CircleMarker||n instanceof L.ImageOverlay)&&e.push(n)}),e=(e=(e=e.filter(function(n){return!!n.pm})).filter(function(n){return!n._pmTempLayer})).filter(function(n){return!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1})},circleToPolygon:function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=t.getLatLng(),i=t.getRadius(),u=Zt(r,i,e,0,n),m=[],_=0;_<u.length;_+=1){var b=[u[_].lat,u[_].lng];m.push(b)}return L.polygon(m,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];t.fire(e,n,r);var i=this.getAllParentGroups(t),u=i.groups;u.forEach(function(m){m.fire(e,n,r)})},getAllParentGroups:function(t){var e=[],n=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||new Date().getTime()-t._pmLastGroupFetch.time>1e3?(function r(i){for(var u in i._eventParents)if(e.indexOf(u)===-1){e.push(u);var m=i._eventParents[u];n.push(m),r(m)}}(t),t._pmLastGroupFetch={time:new Date().getTime(),groups:n,groupIds:e},{groupIds:e,groups:n}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Zt,getTranslation:lt,findDeepCoordIndex:function(t,e){var n;t.some(function i(u){return function(m,_){var b=u.concat(_);return m.lat&&m.lat===e.lat&&m.lng===e.lng?(n=b,!0):Array.isArray(m)&&m.some(i(b))}}([]));var r={};return n&&(r={indexPath:n,index:n[n.length-1],parentPath:n.slice(0,n.length-1)}),r},findDeepMarkerIndex:function(t,e){var n;t.some(function i(u){return function(m,_){var b=u.concat(_);return m._leaflet_id===e._leaflet_id?(n=b,!0):Array.isArray(m)&&m.some(i(b))}}([]));var r={};return n&&(r={indexPath:n,index:n[n.length-1],parentPath:n.slice(0,n.length-1)}),r},_getIndexFromSegment:function(t,e){if(e&&e.length===2){var n=this.findDeepCoordIndex(t,e[0]),r=this.findDeepCoordIndex(t,e[1]),i=Math.max(n.index,r.index);return n.index!==0&&r.index!==0||i===1||(i+=1),{indexA:n,indexB:r,newIndex:i,indexPath:n.indexPath,parentPath:n.parentPath}}return null},_getRotatedRectangle:function(t,e,n,r){var i=Xt(r,t),u=Xt(r,e),m=n*Math.PI/180,_=Math.cos(m),b=Math.sin(m),k=(u.x-i.x)*_+(u.y-i.y)*b,R=(u.y-i.y)*_-(u.x-i.x)*b,N=k*_+i.x,B=k*b+i.y,V=-R*b+i.x,Y=R*_+i.y;return[ge(r,i),ge(r,{x:N,y:B}),ge(r,u),ge(r,{x:V,y:Y})]},pxRadiusToMeterRadius:function(t,e,n){var r=e.project(n),i=L.point(r.x+t,r.y);return e.distance(e.unproject(i),n)}};const Cn=wn;L.PM=L.PM||{version:"2.13.0",Map:ye,Toolbar:v,Draw:j,Edit:Mt,Utils:Cn,Matrix:xn,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this))}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(t){var e=this;t instanceof L.LayerGroup&&t.eachLayer(function(n){e.reInitLayer(n)}),t.pm||L.PM.optIn&&t.options.pmIgnore!==!1||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline?t.pm=new L.PM.Edit.Line(t):t instanceof L.LayerGroup?t.pm=new L.PM.Edit.LayerGroup(t):t instanceof L.ImageOverlay&&(t.pm=new L.PM.Edit.ImageOverlay(t)))}},L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var l=Object(this),o=l.length>>>0,c=arguments[1],p=0;p<o;p++)if(h.call(c,l[p],p,l))return p;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var l=Object(this),o=l.length>>>0,c=arguments[1],p=0;p<o;p++){var y=l[p];if(h.call(c,y,p,l))return y}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var l=1;l<arguments.length;l++){var o=arguments[l];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(h[c]=o[c])}return h}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(h){h.hasOwnProperty("remove")||Object.defineProperty(h,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,l){if(this==null)throw new TypeError('"this" is null or not defined');var o=Object(this),c=o.length>>>0;if(c===0)return!1;for(var p,y,f=0|l,C=Math.max(f>=0?f:c-Math.abs(f),0);C<c;){if((p=o[C])===(y=h)||typeof p=="number"&&typeof y=="number"&&isNaN(p)&&isNaN(y))return!0;C++}return!1}})},1787:(h,l,o)=>{var c=o(2582),p=o(4102),y=o(1540),f=o(9705).Z,C=y.featureEach,A=(y.coordEach,p.polygon,p.featureCollection);function G(H){var T=new c(H);return T.insert=function(E){if(E.type!=="Feature")throw new Error("invalid feature");return E.bbox=E.bbox?E.bbox:f(E),c.prototype.insert.call(this,E)},T.load=function(E){var I=[];return Array.isArray(E)?E.forEach(function(P){if(P.type!=="Feature")throw new Error("invalid features");P.bbox=P.bbox?P.bbox:f(P),I.push(P)}):C(E,function(P){if(P.type!=="Feature")throw new Error("invalid features");P.bbox=P.bbox?P.bbox:f(P),I.push(P)}),c.prototype.load.call(this,I)},T.remove=function(E,I){if(E.type!=="Feature")throw new Error("invalid feature");return E.bbox=E.bbox?E.bbox:f(E),c.prototype.remove.call(this,E,I)},T.clear=function(){return c.prototype.clear.call(this)},T.search=function(E){var I=c.prototype.search.call(this,this.toBBox(E));return A(I)},T.collides=function(E){return c.prototype.collides.call(this,this.toBBox(E))},T.all=function(){var E=c.prototype.all.call(this);return A(E)},T.toJSON=function(){return c.prototype.toJSON.call(this)},T.fromJSON=function(E){return c.prototype.fromJSON.call(this,E)},T.toBBox=function(E){var I;if(E.bbox)I=E.bbox;else if(Array.isArray(E)&&E.length===4)I=E;else if(Array.isArray(E)&&E.length===6)I=[E[0],E[1],E[3],E[4]];else if(E.type==="Feature")I=f(E);else{if(E.type!=="FeatureCollection")throw new Error("invalid geojson");I=f(E)}return{minX:I[0],minY:I[1],maxX:I[2],maxY:I[3]}},T}h.exports=G,h.exports.default=G},1989:(h,l,o)=>{var c=o(1789),p=o(401),y=o(7667),f=o(1327),C=o(1866);function A(G){var H=-1,T=G==null?0:G.length;for(this.clear();++H<T;){var E=G[H];this.set(E[0],E[1])}}A.prototype.clear=c,A.prototype.delete=p,A.prototype.get=y,A.prototype.has=f,A.prototype.set=C,h.exports=A},8407:(h,l,o)=>{var c=o(7040),p=o(4125),y=o(2117),f=o(7518),C=o(4705);function A(G){var H=-1,T=G==null?0:G.length;for(this.clear();++H<T;){var E=G[H];this.set(E[0],E[1])}}A.prototype.clear=c,A.prototype.delete=p,A.prototype.get=y,A.prototype.has=f,A.prototype.set=C,h.exports=A},7071:(h,l,o)=>{var c=o(852)(o(5639),"Map");h.exports=c},3369:(h,l,o)=>{var c=o(4785),p=o(1285),y=o(6e3),f=o(9916),C=o(5265);function A(G){var H=-1,T=G==null?0:G.length;for(this.clear();++H<T;){var E=G[H];this.set(E[0],E[1])}}A.prototype.clear=c,A.prototype.delete=p,A.prototype.get=y,A.prototype.has=f,A.prototype.set=C,h.exports=A},6384:(h,l,o)=>{var c=o(8407),p=o(7465),y=o(3779),f=o(7599),C=o(4758),A=o(4309);function G(H){var T=this.__data__=new c(H);this.size=T.size}G.prototype.clear=p,G.prototype.delete=y,G.prototype.get=f,G.prototype.has=C,G.prototype.set=A,h.exports=G},2705:(h,l,o)=>{var c=o(5639).Symbol;h.exports=c},1149:(h,l,o)=>{var c=o(5639).Uint8Array;h.exports=c},6874:h=>{h.exports=function(l,o,c){switch(c.length){case 0:return l.call(o);case 1:return l.call(o,c[0]);case 2:return l.call(o,c[0],c[1]);case 3:return l.call(o,c[0],c[1],c[2])}return l.apply(o,c)}},4636:(h,l,o)=>{var c=o(2545),p=o(5694),y=o(1469),f=o(4144),C=o(5776),A=o(6719),G=Object.prototype.hasOwnProperty;h.exports=function(H,T){var E=y(H),I=!E&&p(H),P=!E&&!I&&f(H),S=!E&&!I&&!P&&A(H),O=E||I||P||S,g=O?c(H.length,String):[],x=g.length;for(var D in H)!T&&!G.call(H,D)||O&&(D=="length"||P&&(D=="offset"||D=="parent")||S&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||C(D,x))||g.push(D);return g}},9932:h=>{h.exports=function(l,o){for(var c=-1,p=l==null?0:l.length,y=Array(p);++c<p;)y[c]=o(l[c],c,l);return y}},6556:(h,l,o)=>{var c=o(9465),p=o(7813);h.exports=function(y,f,C){(C!==void 0&&!p(y[f],C)||C===void 0&&!(f in y))&&c(y,f,C)}},4865:(h,l,o)=>{var c=o(9465),p=o(7813),y=Object.prototype.hasOwnProperty;h.exports=function(f,C,A){var G=f[C];y.call(f,C)&&p(G,A)&&(A!==void 0||C in f)||c(f,C,A)}},8470:(h,l,o)=>{var c=o(7813);h.exports=function(p,y){for(var f=p.length;f--;)if(c(p[f][0],y))return f;return-1}},9465:(h,l,o)=>{var c=o(8777);h.exports=function(p,y,f){y=="__proto__"&&c?c(p,y,{configurable:!0,enumerable:!0,value:f,writable:!0}):p[y]=f}},3118:(h,l,o)=>{var c=o(3218),p=Object.create,y=function(){function f(){}return function(C){if(!c(C))return{};if(p)return p(C);f.prototype=C;var A=new f;return f.prototype=void 0,A}}();h.exports=y},8483:(h,l,o)=>{var c=o(5063)();h.exports=c},7786:(h,l,o)=>{var c=o(1811),p=o(327);h.exports=function(y,f){for(var C=0,A=(f=c(f,y)).length;y!=null&&C<A;)y=y[p(f[C++])];return C&&C==A?y:void 0}},4239:(h,l,o)=>{var c=o(2705),p=o(9607),y=o(2333),f=c?c.toStringTag:void 0;h.exports=function(C){return C==null?C===void 0?"[object Undefined]":"[object Null]":f&&f in Object(C)?p(C):y(C)}},8565:h=>{var l=Object.prototype.hasOwnProperty;h.exports=function(o,c){return o!=null&&l.call(o,c)}},9454:(h,l,o)=>{var c=o(4239),p=o(7005);h.exports=function(y){return p(y)&&c(y)=="[object Arguments]"}},8458:(h,l,o)=>{var c=o(3560),p=o(5346),y=o(3218),f=o(346),C=/^\[object .+?Constructor\]$/,A=Function.prototype,G=Object.prototype,H=A.toString,T=G.hasOwnProperty,E=RegExp("^"+H.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");h.exports=function(I){return!(!y(I)||p(I))&&(c(I)?E:C).test(f(I))}},8749:(h,l,o)=>{var c=o(4239),p=o(1780),y=o(7005),f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1,h.exports=function(C){return y(C)&&p(C.length)&&!!f[c(C)]}},313:(h,l,o)=>{var c=o(3218),p=o(5726),y=o(3498),f=Object.prototype.hasOwnProperty;h.exports=function(C){if(!c(C))return y(C);var A=p(C),G=[];for(var H in C)(H!="constructor"||!A&&f.call(C,H))&&G.push(H);return G}},2980:(h,l,o)=>{var c=o(6384),p=o(6556),y=o(8483),f=o(9783),C=o(3218),A=o(1704),G=o(6390);h.exports=function H(T,E,I,P,S){T!==E&&y(E,function(O,g){if(S||(S=new c),C(O))f(T,E,g,I,H,P,S);else{var x=P?P(G(T,g),O,g+"",T,E,S):void 0;x===void 0&&(x=O),p(T,g,x)}},A)}},9783:(h,l,o)=>{var c=o(6556),p=o(4626),y=o(7133),f=o(278),C=o(8517),A=o(5694),G=o(1469),H=o(9246),T=o(4144),E=o(3560),I=o(3218),P=o(8630),S=o(6719),O=o(6390),g=o(9881);h.exports=function(x,D,F,X,q,$,tt){var Z=O(x,F),Q=O(D,F),ut=tt.get(Q);if(ut)c(x,F,ut);else{var et=$?$(Z,Q,F+"",x,D,tt):void 0,ht=et===void 0;if(ht){var vt=G(Q),ct=!vt&&T(Q),Lt=!vt&&!ct&&S(Q);et=Q,vt||ct||Lt?G(Z)?et=Z:H(Z)?et=f(Z):ct?(ht=!1,et=p(Q,!0)):Lt?(ht=!1,et=y(Q,!0)):et=[]:P(Q)||A(Q)?(et=Z,A(Z)?et=g(Z):I(Z)&&!E(Z)||(et=C(Q))):ht=!1}ht&&(tt.set(Q,et),q(et,Q,X,$,tt),tt.delete(Q)),c(x,F,et)}}},5976:(h,l,o)=>{var c=o(6557),p=o(5357),y=o(61);h.exports=function(f,C){return y(p(f,C,c),f+"")}},6560:(h,l,o)=>{var c=o(5703),p=o(8777),y=o(6557),f=p?function(C,A){return p(C,"toString",{configurable:!0,enumerable:!1,value:c(A),writable:!0})}:y;h.exports=f},2545:h=>{h.exports=function(l,o){for(var c=-1,p=Array(l);++c<l;)p[c]=o(c);return p}},531:(h,l,o)=>{var c=o(2705),p=o(9932),y=o(1469),f=o(3448),C=c?c.prototype:void 0,A=C?C.toString:void 0;h.exports=function G(H){if(typeof H=="string")return H;if(y(H))return p(H,G)+"";if(f(H))return A?A.call(H):"";var T=H+"";return T=="0"&&1/H==-1/0?"-0":T}},1717:h=>{h.exports=function(l){return function(o){return l(o)}}},1811:(h,l,o)=>{var c=o(1469),p=o(5403),y=o(5514),f=o(9833);h.exports=function(C,A){return c(C)?C:p(C,A)?[C]:y(f(C))}},4318:(h,l,o)=>{var c=o(1149);h.exports=function(p){var y=new p.constructor(p.byteLength);return new c(y).set(new c(p)),y}},4626:(h,l,o)=>{h=o.nmd(h);var c=o(5639),p=l&&!l.nodeType&&l,y=p&&h&&!h.nodeType&&h,f=y&&y.exports===p?c.Buffer:void 0,C=f?f.allocUnsafe:void 0;h.exports=function(A,G){if(G)return A.slice();var H=A.length,T=C?C(H):new A.constructor(H);return A.copy(T),T}},7133:(h,l,o)=>{var c=o(4318);h.exports=function(p,y){var f=y?c(p.buffer):p.buffer;return new p.constructor(f,p.byteOffset,p.length)}},278:h=>{h.exports=function(l,o){var c=-1,p=l.length;for(o||(o=Array(p));++c<p;)o[c]=l[c];return o}},8363:(h,l,o)=>{var c=o(4865),p=o(9465);h.exports=function(y,f,C,A){var G=!C;C||(C={});for(var H=-1,T=f.length;++H<T;){var E=f[H],I=A?A(C[E],y[E],E,C,y):void 0;I===void 0&&(I=y[E]),G?p(C,E,I):c(C,E,I)}return C}},4429:(h,l,o)=>{var c=o(5639)["__core-js_shared__"];h.exports=c},1463:(h,l,o)=>{var c=o(5976),p=o(6612);h.exports=function(y){return c(function(f,C){var A=-1,G=C.length,H=G>1?C[G-1]:void 0,T=G>2?C[2]:void 0;for(H=y.length>3&&typeof H=="function"?(G--,H):void 0,T&&p(C[0],C[1],T)&&(H=G<3?void 0:H,G=1),f=Object(f);++A<G;){var E=C[A];E&&y(f,E,A,H)}return f})}},5063:h=>{h.exports=function(l){return function(o,c,p){for(var y=-1,f=Object(o),C=p(o),A=C.length;A--;){var G=C[l?A:++y];if(c(f[G],G,f)===!1)break}return o}}},8777:(h,l,o)=>{var c=o(852),p=function(){try{var y=c(Object,"defineProperty");return y({},"",{}),y}catch{}}();h.exports=p},1957:(h,l,o)=>{var c=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g;h.exports=c},5050:(h,l,o)=>{var c=o(7019);h.exports=function(p,y){var f=p.__data__;return c(y)?f[typeof y=="string"?"string":"hash"]:f.map}},852:(h,l,o)=>{var c=o(8458),p=o(7801);h.exports=function(y,f){var C=p(y,f);return c(C)?C:void 0}},5924:(h,l,o)=>{var c=o(5569)(Object.getPrototypeOf,Object);h.exports=c},9607:(h,l,o)=>{var c=o(2705),p=Object.prototype,y=p.hasOwnProperty,f=p.toString,C=c?c.toStringTag:void 0;h.exports=function(A){var G=y.call(A,C),H=A[C];try{A[C]=void 0;var T=!0}catch{}var E=f.call(A);return T&&(G?A[C]=H:delete A[C]),E}},7801:h=>{h.exports=function(l,o){return l==null?void 0:l[o]}},222:(h,l,o)=>{var c=o(1811),p=o(5694),y=o(1469),f=o(5776),C=o(1780),A=o(327);h.exports=function(G,H,T){for(var E=-1,I=(H=c(H,G)).length,P=!1;++E<I;){var S=A(H[E]);if(!(P=G!=null&&T(G,S)))break;G=G[S]}return P||++E!=I?P:!!(I=G==null?0:G.length)&&C(I)&&f(S,I)&&(y(G)||p(G))}},1789:(h,l,o)=>{var c=o(4536);h.exports=function(){this.__data__=c?c(null):{},this.size=0}},401:h=>{h.exports=function(l){var o=this.has(l)&&delete this.__data__[l];return this.size-=o?1:0,o}},7667:(h,l,o)=>{var c=o(4536),p=Object.prototype.hasOwnProperty;h.exports=function(y){var f=this.__data__;if(c){var C=f[y];return C==="__lodash_hash_undefined__"?void 0:C}return p.call(f,y)?f[y]:void 0}},1327:(h,l,o)=>{var c=o(4536),p=Object.prototype.hasOwnProperty;h.exports=function(y){var f=this.__data__;return c?f[y]!==void 0:p.call(f,y)}},1866:(h,l,o)=>{var c=o(4536);h.exports=function(p,y){var f=this.__data__;return this.size+=this.has(p)?0:1,f[p]=c&&y===void 0?"__lodash_hash_undefined__":y,this}},8517:(h,l,o)=>{var c=o(3118),p=o(5924),y=o(5726);h.exports=function(f){return typeof f.constructor!="function"||y(f)?{}:c(p(f))}},5776:h=>{var l=/^(?:0|[1-9]\d*)$/;h.exports=function(o,c){var p=typeof o;return!!(c=c==null?9007199254740991:c)&&(p=="number"||p!="symbol"&&l.test(o))&&o>-1&&o%1==0&&o<c}},6612:(h,l,o)=>{var c=o(7813),p=o(8612),y=o(5776),f=o(3218);h.exports=function(C,A,G){if(!f(G))return!1;var H=typeof A;return!!(H=="number"?p(G)&&y(A,G.length):H=="string"&&A in G)&&c(G[A],C)}},5403:(h,l,o)=>{var c=o(1469),p=o(3448),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;h.exports=function(C,A){if(c(C))return!1;var G=typeof C;return!(G!="number"&&G!="symbol"&&G!="boolean"&&C!=null&&!p(C))||f.test(C)||!y.test(C)||A!=null&&C in Object(A)}},7019:h=>{h.exports=function(l){var o=typeof l;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?l!=="__proto__":l===null}},5346:(h,l,o)=>{var c,p=o(4429),y=(c=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";h.exports=function(f){return!!y&&y in f}},5726:h=>{var l=Object.prototype;h.exports=function(o){var c=o&&o.constructor;return o===(typeof c=="function"&&c.prototype||l)}},7040:h=>{h.exports=function(){this.__data__=[],this.size=0}},4125:(h,l,o)=>{var c=o(8470),p=Array.prototype.splice;h.exports=function(y){var f=this.__data__,C=c(f,y);return!(C<0)&&(C==f.length-1?f.pop():p.call(f,C,1),--this.size,!0)}},2117:(h,l,o)=>{var c=o(8470);h.exports=function(p){var y=this.__data__,f=c(y,p);return f<0?void 0:y[f][1]}},7518:(h,l,o)=>{var c=o(8470);h.exports=function(p){return c(this.__data__,p)>-1}},4705:(h,l,o)=>{var c=o(8470);h.exports=function(p,y){var f=this.__data__,C=c(f,p);return C<0?(++this.size,f.push([p,y])):f[C][1]=y,this}},4785:(h,l,o)=>{var c=o(1989),p=o(8407),y=o(7071);h.exports=function(){this.size=0,this.__data__={hash:new c,map:new(y||p),string:new c}}},1285:(h,l,o)=>{var c=o(5050);h.exports=function(p){var y=c(this,p).delete(p);return this.size-=y?1:0,y}},6e3:(h,l,o)=>{var c=o(5050);h.exports=function(p){return c(this,p).get(p)}},9916:(h,l,o)=>{var c=o(5050);h.exports=function(p){return c(this,p).has(p)}},5265:(h,l,o)=>{var c=o(5050);h.exports=function(p,y){var f=c(this,p),C=f.size;return f.set(p,y),this.size+=f.size==C?0:1,this}},4523:(h,l,o)=>{var c=o(8306);h.exports=function(p){var y=c(p,function(C){return f.size===500&&f.clear(),C}),f=y.cache;return y}},4536:(h,l,o)=>{var c=o(852)(Object,"create");h.exports=c},3498:h=>{h.exports=function(l){var o=[];if(l!=null)for(var c in Object(l))o.push(c);return o}},1167:(h,l,o)=>{h=o.nmd(h);var c=o(1957),p=l&&!l.nodeType&&l,y=p&&h&&!h.nodeType&&h,f=y&&y.exports===p&&c.process,C=function(){try{var A=y&&y.require&&y.require("util").types;return A||f&&f.binding&&f.binding("util")}catch{}}();h.exports=C},2333:h=>{var l=Object.prototype.toString;h.exports=function(o){return l.call(o)}},5569:h=>{h.exports=function(l,o){return function(c){return l(o(c))}}},5357:(h,l,o)=>{var c=o(6874),p=Math.max;h.exports=function(y,f,C){return f=p(f===void 0?y.length-1:f,0),function(){for(var A=arguments,G=-1,H=p(A.length-f,0),T=Array(H);++G<H;)T[G]=A[f+G];G=-1;for(var E=Array(f+1);++G<f;)E[G]=A[G];return E[f]=C(T),c(y,this,E)}}},5639:(h,l,o)=>{var c=o(1957),p=typeof self=="object"&&self&&self.Object===Object&&self,y=c||p||Function("return this")();h.exports=y},6390:h=>{h.exports=function(l,o){if((o!=="constructor"||typeof l[o]!="function")&&o!="__proto__")return l[o]}},61:(h,l,o)=>{var c=o(6560),p=o(1275)(c);h.exports=p},1275:h=>{var l=Date.now;h.exports=function(o){var c=0,p=0;return function(){var y=l(),f=16-(y-p);if(p=y,f>0){if(++c>=800)return arguments[0]}else c=0;return o.apply(void 0,arguments)}}},7465:(h,l,o)=>{var c=o(8407);h.exports=function(){this.__data__=new c,this.size=0}},3779:h=>{h.exports=function(l){var o=this.__data__,c=o.delete(l);return this.size=o.size,c}},7599:h=>{h.exports=function(l){return this.__data__.get(l)}},4758:h=>{h.exports=function(l){return this.__data__.has(l)}},4309:(h,l,o)=>{var c=o(8407),p=o(7071),y=o(3369);h.exports=function(f,C){var A=this.__data__;if(A instanceof c){var G=A.__data__;if(!p||G.length<199)return G.push([f,C]),this.size=++A.size,this;A=this.__data__=new y(G)}return A.set(f,C),this.size=A.size,this}},5514:(h,l,o)=>{var c=o(4523),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,f=c(function(C){var A=[];return C.charCodeAt(0)===46&&A.push(""),C.replace(p,function(G,H,T,E){A.push(T?E.replace(y,"$1"):H||G)}),A});h.exports=f},327:(h,l,o)=>{var c=o(3448);h.exports=function(p){if(typeof p=="string"||c(p))return p;var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}},346:h=>{var l=Function.prototype.toString;h.exports=function(o){if(o!=null){try{return l.call(o)}catch{}try{return o+""}catch{}}return""}},5703:h=>{h.exports=function(l){return function(){return l}}},7813:h=>{h.exports=function(l,o){return l===o||l!=l&&o!=o}},7361:(h,l,o)=>{var c=o(7786);h.exports=function(p,y,f){var C=p==null?void 0:c(p,y);return C===void 0?f:C}},8721:(h,l,o)=>{var c=o(8565),p=o(222);h.exports=function(y,f){return y!=null&&p(y,f,c)}},6557:h=>{h.exports=function(l){return l}},5694:(h,l,o)=>{var c=o(9454),p=o(7005),y=Object.prototype,f=y.hasOwnProperty,C=y.propertyIsEnumerable,A=c(function(){return arguments}())?c:function(G){return p(G)&&f.call(G,"callee")&&!C.call(G,"callee")};h.exports=A},1469:h=>{var l=Array.isArray;h.exports=l},8612:(h,l,o)=>{var c=o(3560),p=o(1780);h.exports=function(y){return y!=null&&p(y.length)&&!c(y)}},9246:(h,l,o)=>{var c=o(8612),p=o(7005);h.exports=function(y){return p(y)&&c(y)}},4144:(h,l,o)=>{h=o.nmd(h);var c=o(5639),p=o(5062),y=l&&!l.nodeType&&l,f=y&&h&&!h.nodeType&&h,C=f&&f.exports===y?c.Buffer:void 0,A=(C?C.isBuffer:void 0)||p;h.exports=A},3560:(h,l,o)=>{var c=o(4239),p=o(3218);h.exports=function(y){if(!p(y))return!1;var f=c(y);return f=="[object Function]"||f=="[object GeneratorFunction]"||f=="[object AsyncFunction]"||f=="[object Proxy]"}},1780:h=>{h.exports=function(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=9007199254740991}},3218:h=>{h.exports=function(l){var o=typeof l;return l!=null&&(o=="object"||o=="function")}},7005:h=>{h.exports=function(l){return l!=null&&typeof l=="object"}},8630:(h,l,o)=>{var c=o(4239),p=o(5924),y=o(7005),f=Function.prototype,C=Object.prototype,A=f.toString,G=C.hasOwnProperty,H=A.call(Object);h.exports=function(T){if(!y(T)||c(T)!="[object Object]")return!1;var E=p(T);if(E===null)return!0;var I=G.call(E,"constructor")&&E.constructor;return typeof I=="function"&&I instanceof I&&A.call(I)==H}},3448:(h,l,o)=>{var c=o(4239),p=o(7005);h.exports=function(y){return typeof y=="symbol"||p(y)&&c(y)=="[object Symbol]"}},6719:(h,l,o)=>{var c=o(8749),p=o(1717),y=o(1167),f=y&&y.isTypedArray,C=f?p(f):c;h.exports=C},1704:(h,l,o)=>{var c=o(4636),p=o(313),y=o(8612);h.exports=function(f){return y(f)?c(f,!0):p(f)}},8306:(h,l,o)=>{var c=o(3369);function p(y,f){if(typeof y!="function"||f!=null&&typeof f!="function")throw new TypeError("Expected a function");var C=function(){var A=arguments,G=f?f.apply(this,A):A[0],H=C.cache;if(H.has(G))return H.get(G);var T=y.apply(this,A);return C.cache=H.set(G,T)||H,T};return C.cache=new(p.Cache||c),C}p.Cache=c,h.exports=p},2492:(h,l,o)=>{var c=o(2980),p=o(1463)(function(y,f,C){c(y,f,C)});h.exports=p},5062:h=>{h.exports=function(){return!1}},9881:(h,l,o)=>{var c=o(8363),p=o(1704);h.exports=function(y){return c(y,p(y))}},9833:(h,l,o)=>{var c=o(531);h.exports=function(p){return p==null?"":c(p)}},2676:function(h){h.exports=function(){function l(v,a){if(!(v instanceof a))throw new TypeError("Cannot call a class as a function")}function o(v,a){for(var s=0;s<a.length;s++){var d=a[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}function c(v,a,s){return a&&o(v.prototype,a),s&&o(v,s),v}var p=function(){function v(a,s){this.next=null,this.key=a,this.data=s,this.left=null,this.right=null}return v}();function y(v,a){return v>a?1:v<a?-1:0}function f(v,a,s){for(var d=new p(null,null),M=d,w=d;;){var j=s(v,a.key);if(j<0){if(a.left===null)break;if(s(v,a.left.key)<0){var U=a.left;if(a.left=U.right,U.right=a,(a=U).left===null)break}w.left=a,w=a,a=a.left}else{if(!(j>0)||a.right===null||s(v,a.right.key)>0&&(U=a.right,a.right=U.left,U.left=a,(a=U).right===null))break;M.right=a,M=a,a=a.right}}return M.right=a.left,w.left=a.right,a.left=d.right,a.right=d.left,a}function C(v,a,s,d){var M=new p(v,a);if(s===null)return M.left=M.right=null,M;var w=d(v,(s=f(v,s,d)).key);return w<0?(M.left=s.left,M.right=s,s.left=null):w>=0&&(M.right=s.right,M.left=s,s.right=null),M}function A(v,a,s){var d=null,M=null;if(a){var w=s((a=f(v,a,s)).key,v);w===0?(d=a.left,M=a.right):w<0?(M=a.right,a.right=null,d=a):(d=a.left,a.left=null,M=a)}return{left:d,right:M}}function G(v,a,s){return a===null?v:(v===null||((a=f(v.key,a,s)).left=v),a)}function H(v,a,s,d,M){if(v){d(a+(s?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+M(v)+`
`);var w=a+(s?"    ":"\u2502   ");v.left&&H(v.left,w,!1,d,M),v.right&&H(v.right,w,!0,d,M)}}var T=function(){function v(a){a===void 0&&(a=y),this._root=null,this._size=0,this._comparator=a}return v.prototype.insert=function(a,s){return this._size++,this._root=C(a,s,this._root,this._comparator)},v.prototype.add=function(a,s){var d=new p(a,s);this._root===null&&(d.left=d.right=null,this._size++,this._root=d);var M=this._comparator,w=f(a,this._root,M),j=M(a,w.key);return j===0?this._root=w:(j<0?(d.left=w.left,d.right=w,w.left=null):j>0&&(d.right=w.right,d.left=w,w.right=null),this._size++,this._root=d),this._root},v.prototype.remove=function(a){this._root=this._remove(a,this._root,this._comparator)},v.prototype._remove=function(a,s,d){var M;return s===null?null:d(a,(s=f(a,s,d)).key)===0?(s.left===null?M=s.right:(M=f(a,s.left,d)).right=s.right,this._size--,M):s},v.prototype.pop=function(){var a=this._root;if(a){for(;a.left;)a=a.left;return this._root=f(a.key,this._root,this._comparator),this._root=this._remove(a.key,this._root,this._comparator),{key:a.key,data:a.data}}return null},v.prototype.findStatic=function(a){for(var s=this._root,d=this._comparator;s;){var M=d(a,s.key);if(M===0)return s;s=M<0?s.left:s.right}return null},v.prototype.find=function(a){return this._root&&(this._root=f(a,this._root,this._comparator),this._comparator(a,this._root.key)!==0)?null:this._root},v.prototype.contains=function(a){for(var s=this._root,d=this._comparator;s;){var M=d(a,s.key);if(M===0)return!0;s=M<0?s.left:s.right}return!1},v.prototype.forEach=function(a,s){for(var d=this._root,M=[],w=!1;!w;)d!==null?(M.push(d),d=d.left):M.length!==0?(d=M.pop(),a.call(s,d),d=d.right):w=!0;return this},v.prototype.range=function(a,s,d,M){for(var w=[],j=this._comparator,U=this._root;w.length!==0||U;)if(U)w.push(U),U=U.left;else{if(j((U=w.pop()).key,s)>0)break;if(j(U.key,a)>=0&&d.call(M,U))return this;U=U.right}return this},v.prototype.keys=function(){var a=[];return this.forEach(function(s){var d=s.key;return a.push(d)}),a},v.prototype.values=function(){var a=[];return this.forEach(function(s){var d=s.data;return a.push(d)}),a},v.prototype.min=function(){return this._root?this.minNode(this._root).key:null},v.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},v.prototype.minNode=function(a){if(a===void 0&&(a=this._root),a)for(;a.left;)a=a.left;return a},v.prototype.maxNode=function(a){if(a===void 0&&(a=this._root),a)for(;a.right;)a=a.right;return a},v.prototype.at=function(a){for(var s=this._root,d=!1,M=0,w=[];!d;)if(s)w.push(s),s=s.left;else if(w.length>0){if(s=w.pop(),M===a)return s;M++,s=s.right}else d=!0;return null},v.prototype.next=function(a){var s=this._root,d=null;if(a.right){for(d=a.right;d.left;)d=d.left;return d}for(var M=this._comparator;s;){var w=M(a.key,s.key);if(w===0)break;w<0?(d=s,s=s.left):s=s.right}return d},v.prototype.prev=function(a){var s=this._root,d=null;if(a.left!==null){for(d=a.left;d.right;)d=d.right;return d}for(var M=this._comparator;s;){var w=M(a.key,s.key);if(w===0)break;w<0?s=s.left:(d=s,s=s.right)}return d},v.prototype.clear=function(){return this._root=null,this._size=0,this},v.prototype.toList=function(){return P(this._root)},v.prototype.load=function(a,s,d){s===void 0&&(s=[]),d===void 0&&(d=!1);var M=a.length,w=this._comparator;if(d&&g(a,s,0,M-1,w),this._root===null)this._root=E(a,s,0,M),this._size=M;else{var j=O(this.toList(),I(a,s),w);M=this._size+M,this._root=S({head:j},0,M)}return this},v.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(v.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),v.prototype.toString=function(a){a===void 0&&(a=function(d){return String(d.key)});var s=[];return H(this._root,"",!0,function(d){return s.push(d)},a),s.join("")},v.prototype.update=function(a,s,d){var M=this._comparator,w=A(a,this._root,M),j=w.left,U=w.right;M(a,s)<0?U=C(s,d,U,M):j=C(s,d,j,M),this._root=G(j,U,M)},v.prototype.split=function(a){return A(a,this._root,this._comparator)},v}();function E(v,a,s,d){var M=d-s;if(M>0){var w=s+Math.floor(M/2),j=v[w],U=a[w],J=new p(j,U);return J.left=E(v,a,s,w),J.right=E(v,a,w+1,d),J}return null}function I(v,a){for(var s=new p(null,null),d=s,M=0;M<v.length;M++)d=d.next=new p(v[M],a[M]);return d.next=null,s.next}function P(v){for(var a=v,s=[],d=!1,M=new p(null,null),w=M;!d;)a?(s.push(a),a=a.left):s.length>0?a=(a=w=w.next=s.pop()).right:d=!0;return w.next=null,M.next}function S(v,a,s){var d=s-a;if(d>0){var M=a+Math.floor(d/2),w=S(v,a,M),j=v.head;return j.left=w,v.head=v.head.next,j.right=S(v,M+1,s),j}return null}function O(v,a,s){for(var d=new p(null,null),M=d,w=v,j=a;w!==null&&j!==null;)s(w.key,j.key)<0?(M.next=w,w=w.next):(M.next=j,j=j.next),M=M.next;return w!==null?M.next=w:j!==null&&(M.next=j),d.next}function g(v,a,s,d,M){if(!(s>=d)){for(var w=v[s+d>>1],j=s-1,U=d+1;;){do j++;while(M(v[j],w)<0);do U--;while(M(v[U],w)>0);if(j>=U)break;var J=v[j];v[j]=v[U],v[U]=J,J=a[j],a[j]=a[U],a[U]=J}g(v,a,s,U,M),g(v,a,U+1,d,M)}}var x=function(v,a){return v.ll.x<=a.x&&a.x<=v.ur.x&&v.ll.y<=a.y&&a.y<=v.ur.y},D=function(v,a){if(a.ur.x<v.ll.x||v.ur.x<a.ll.x||a.ur.y<v.ll.y||v.ur.y<a.ll.y)return null;var s=v.ll.x<a.ll.x?a.ll.x:v.ll.x,d=v.ur.x<a.ur.x?v.ur.x:a.ur.x;return{ll:{x:s,y:v.ll.y<a.ll.y?a.ll.y:v.ll.y},ur:{x:d,y:v.ur.y<a.ur.y?v.ur.y:a.ur.y}}},F=Number.EPSILON;F===void 0&&(F=Math.pow(2,-52));var X=F*F,q=function(v,a){if(-F<v&&v<F&&-F<a&&a<F)return 0;var s=v-a;return s*s<X*v*a?0:v<a?-1:1},$=function(){function v(){l(this,v),this.reset()}return c(v,[{key:"reset",value:function(){this.xRounder=new tt,this.yRounder=new tt}},{key:"round",value:function(a,s){return{x:this.xRounder.round(a),y:this.yRounder.round(s)}}}]),v}(),tt=function(){function v(){l(this,v),this.tree=new T,this.round(0)}return c(v,[{key:"round",value:function(a){var s=this.tree.add(a),d=this.tree.prev(s);if(d!==null&&q(s.key,d.key)===0)return this.tree.remove(a),d.key;var M=this.tree.next(s);return M!==null&&q(s.key,M.key)===0?(this.tree.remove(a),M.key):a}}]),v}(),Z=new $,Q=function(v,a){return v.x*a.y-v.y*a.x},ut=function(v,a){return v.x*a.x+v.y*a.y},et=function(v,a,s){var d={x:a.x-v.x,y:a.y-v.y},M={x:s.x-v.x,y:s.y-v.y},w=Q(d,M);return q(w,0)},ht=function(v){return Math.sqrt(ut(v,v))},vt=function(v,a,s){var d={x:a.x-v.x,y:a.y-v.y},M={x:s.x-v.x,y:s.y-v.y};return Q(M,d)/ht(M)/ht(d)},ct=function(v,a,s){var d={x:a.x-v.x,y:a.y-v.y},M={x:s.x-v.x,y:s.y-v.y};return ut(M,d)/ht(M)/ht(d)},Lt=function(v,a,s){return a.y===0?null:{x:v.x+a.x/a.y*(s-v.y),y:s}},Dt=function(v,a,s){return a.x===0?null:{x:s,y:v.y+a.y/a.x*(s-v.x)}},lt=function(v,a,s,d){if(a.x===0)return Dt(s,d,v.x);if(d.x===0)return Dt(v,a,s.x);if(a.y===0)return Lt(s,d,v.y);if(d.y===0)return Lt(v,a,s.y);var M=Q(a,d);if(M==0)return null;var w={x:s.x-v.x,y:s.y-v.y},j=Q(w,a)/M,U=Q(w,d)/M;return{x:(v.x+U*a.x+(s.x+j*d.x))/2,y:(v.y+U*a.y+(s.y+j*d.y))/2}},_t=function(){function v(a,s){l(this,v),a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=s}return c(v,null,[{key:"compare",value:function(a,s){var d=v.comparePoints(a.point,s.point);return d!==0?d:(a.point!==s.point&&a.link(s),a.isLeft!==s.isLeft?a.isLeft?1:-1:Jt.compare(a.segment,s.segment))}},{key:"comparePoints",value:function(a,s){return a.x<s.x?-1:a.x>s.x?1:a.y<s.y?-1:a.y>s.y?1:0}}]),c(v,[{key:"link",value:function(a){if(a.point===this.point)throw new Error("Tried to link already linked events");for(var s=a.point.events,d=0,M=s.length;d<M;d++){var w=s[d];this.point.events.push(w),w.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var a=this.point.events.length,s=0;s<a;s++){var d=this.point.events[s];if(d.segment.consumedBy===void 0)for(var M=s+1;M<a;M++){var w=this.point.events[M];w.consumedBy===void 0&&d.otherSE.point.events===w.otherSE.point.events&&d.segment.consume(w.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var a=[],s=0,d=this.point.events.length;s<d;s++){var M=this.point.events[s];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&a.push(M)}return a}},{key:"getLeftmostComparator",value:function(a){var s=this,d=new Map,M=function(w){var j=w.otherSE;d.set(w,{sine:vt(s.point,a.point,j.point),cosine:ct(s.point,a.point,j.point)})};return function(w,j){d.has(w)||M(w),d.has(j)||M(j);var U=d.get(w),J=U.sine,rt=U.cosine,ot=d.get(j),st=ot.sine,it=ot.cosine;return J>=0&&st>=0?rt<it?1:rt>it?-1:0:J<0&&st<0?rt<it?-1:rt>it?1:0:st<J?-1:st>J?1:0}}}]),v}(),Wt=0,Jt=function(){function v(a,s,d,M){l(this,v),this.id=++Wt,this.leftSE=a,a.segment=this,a.otherSE=s,this.rightSE=s,s.segment=this,s.otherSE=a,this.rings=d,this.windings=M}return c(v,null,[{key:"compare",value:function(a,s){var d=a.leftSE.point.x,M=s.leftSE.point.x,w=a.rightSE.point.x,j=s.rightSE.point.x;if(j<d)return 1;if(w<M)return-1;var U=a.leftSE.point.y,J=s.leftSE.point.y,rt=a.rightSE.point.y,ot=s.rightSE.point.y;if(d<M){if(J<U&&J<rt)return 1;if(J>U&&J>rt)return-1;var st=a.comparePoint(s.leftSE.point);if(st<0)return 1;if(st>0)return-1;var it=s.comparePoint(a.rightSE.point);return it!==0?it:-1}if(d>M){if(U<J&&U<ot)return-1;if(U>J&&U>ot)return 1;var bt=s.comparePoint(a.leftSE.point);if(bt!==0)return bt;var gt=a.comparePoint(s.rightSE.point);return gt<0?1:gt>0?-1:1}if(U<J)return-1;if(U>J)return 1;if(w<j){var yt=s.comparePoint(a.rightSE.point);if(yt!==0)return yt}if(w>j){var ft=a.comparePoint(s.rightSE.point);if(ft<0)return 1;if(ft>0)return-1}if(w!==j){var kt=rt-U,wt=w-d,Ot=ot-J,Ct=j-M;if(kt>wt&&Ot<Ct)return 1;if(kt<wt&&Ot>Ct)return-1}return w>j?1:w<j||rt<ot?-1:rt>ot?1:a.id<s.id?-1:a.id>s.id?1:0}}]),c(v,[{key:"replaceRightSE",value:function(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var a=this.leftSE.point.y,s=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a<s?a:s},ur:{x:this.rightSE.point.x,y:a>s?a:s}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(a){return a.x===this.leftSE.point.x&&a.y===this.leftSE.point.y||a.x===this.rightSE.point.x&&a.y===this.rightSE.point.y}},{key:"comparePoint",value:function(a){if(this.isAnEndpoint(a))return 0;var s=this.leftSE.point,d=this.rightSE.point,M=this.vector();if(s.x===d.x)return a.x===s.x?0:a.x<s.x?1:-1;var w=(a.y-s.y)/M.y,j=s.x+w*M.x;if(a.x===j)return 0;var U=(a.x-s.x)/M.x,J=s.y+U*M.y;return a.y===J?0:a.y<J?-1:1}},{key:"getIntersection",value:function(a){var s=this.bbox(),d=a.bbox(),M=D(s,d);if(M===null)return null;var w=this.leftSE.point,j=this.rightSE.point,U=a.leftSE.point,J=a.rightSE.point,rt=x(s,U)&&this.comparePoint(U)===0,ot=x(d,w)&&a.comparePoint(w)===0,st=x(s,J)&&this.comparePoint(J)===0,it=x(d,j)&&a.comparePoint(j)===0;if(ot&&rt)return it&&!st?j:!it&&st?J:null;if(ot)return st&&w.x===J.x&&w.y===J.y?null:w;if(rt)return it&&j.x===U.x&&j.y===U.y?null:U;if(it&&st)return null;if(it)return j;if(st)return J;var bt=lt(w,this.vector(),U,a.vector());return bt===null?null:x(M,bt)?Z.round(bt.x,bt.y):null}},{key:"split",value:function(a){var s=[],d=a.events!==void 0,M=new _t(a,!0),w=new _t(a,!1),j=this.rightSE;this.replaceRightSE(w),s.push(w),s.push(M);var U=new v(M,j,this.rings.slice(),this.windings.slice());return _t.comparePoints(U.leftSE.point,U.rightSE.point)>0&&U.swapEvents(),_t.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),d&&(M.checkForConsuming(),w.checkForConsuming()),s}},{key:"swapEvents",value:function(){var a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var s=0,d=this.windings.length;s<d;s++)this.windings[s]*=-1}},{key:"consume",value:function(a){for(var s=this,d=a;s.consumedBy;)s=s.consumedBy;for(;d.consumedBy;)d=d.consumedBy;var M=v.compare(s,d);if(M!==0){if(M>0){var w=s;s=d,d=w}if(s.prev===d){var j=s;s=d,d=j}for(var U=0,J=d.rings.length;U<J;U++){var rt=d.rings[U],ot=d.windings[U],st=s.rings.indexOf(rt);st===-1?(s.rings.push(rt),s.windings.push(ot)):s.windings[st]+=ot}d.rings=null,d.windings=null,d.consumedBy=s,d.leftSE.consumedBy=s.leftSE,d.rightSE.consumedBy=s.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};for(var s=this._afterState.rings,d=this._afterState.windings,M=this._afterState.multiPolys,w=0,j=this.rings.length;w<j;w++){var U=this.rings[w],J=this.windings[w],rt=s.indexOf(U);rt===-1?(s.push(U),d.push(J)):d[rt]+=J}for(var ot=[],st=[],it=0,bt=s.length;it<bt;it++)if(d[it]!==0){var gt=s[it],yt=gt.poly;if(st.indexOf(yt)===-1)if(gt.isExterior)ot.push(yt);else{st.indexOf(yt)===-1&&st.push(yt);var ft=ot.indexOf(gt.poly);ft!==-1&&ot.splice(ft,1)}}for(var kt=0,wt=ot.length;kt<wt;kt++){var Ot=ot[kt].multiPoly;M.indexOf(Ot)===-1&&M.push(Ot)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var a=this.beforeState().multiPolys,s=this.afterState().multiPolys;switch(Tt.type){case"union":var d=a.length===0,M=s.length===0;this._isInResult=d!==M;break;case"intersection":var w,j;a.length<s.length?(w=a.length,j=s.length):(w=s.length,j=a.length),this._isInResult=j===Tt.numMultiPolys&&w<j;break;case"xor":var U=Math.abs(a.length-s.length);this._isInResult=U%2==1;break;case"difference":var J=function(rt){return rt.length===1&&rt[0].isSubject};this._isInResult=J(a)!==J(s);break;default:throw new Error("Unrecognized operation type found ".concat(Tt.type))}return this._isInResult}}],[{key:"fromRing",value:function(a,s,d){var M,w,j,U=_t.comparePoints(a,s);if(U<0)M=a,w=s,j=1;else{if(!(U>0))throw new Error("Tried to create degenerate segment at [".concat(a.x,", ").concat(a.y,"]"));M=s,w=a,j=-1}return new v(new _t(M,!0),new _t(w,!1),[d],[j])}}]),v}(),Zt=function(){function v(a,s,d){if(l(this,v),!Array.isArray(a)||a.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=s,this.isExterior=d,this.segments=[],typeof a[0][0]!="number"||typeof a[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var M=Z.round(a[0][0],a[0][1]);this.bbox={ll:{x:M.x,y:M.y},ur:{x:M.x,y:M.y}};for(var w=M,j=1,U=a.length;j<U;j++){if(typeof a[j][0]!="number"||typeof a[j][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var J=Z.round(a[j][0],a[j][1]);J.x===w.x&&J.y===w.y||(this.segments.push(Jt.fromRing(w,J,this)),J.x<this.bbox.ll.x&&(this.bbox.ll.x=J.x),J.y<this.bbox.ll.y&&(this.bbox.ll.y=J.y),J.x>this.bbox.ur.x&&(this.bbox.ur.x=J.x),J.y>this.bbox.ur.y&&(this.bbox.ur.y=J.y),w=J)}M.x===w.x&&M.y===w.y||this.segments.push(Jt.fromRing(w,M,this))}return c(v,[{key:"getSweepEvents",value:function(){for(var a=[],s=0,d=this.segments.length;s<d;s++){var M=this.segments[s];a.push(M.leftSE),a.push(M.rightSE)}return a}}]),v}(),Gt=function(){function v(a,s){if(l(this,v),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Zt(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var d=1,M=a.length;d<M;d++){var w=new Zt(a[d],this,!1);w.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=w.bbox.ur.y),this.interiorRings.push(w)}this.multiPoly=s}return c(v,[{key:"getSweepEvents",value:function(){for(var a=this.exteriorRing.getSweepEvents(),s=0,d=this.interiorRings.length;s<d;s++)for(var M=this.interiorRings[s].getSweepEvents(),w=0,j=M.length;w<j;w++)a.push(M[w]);return a}}]),v}(),Nt=function(){function v(a,s){if(l(this,v),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof a[0][0][0]=="number"&&(a=[a])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var d=0,M=a.length;d<M;d++){var w=new Gt(a[d],this);w.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=w.bbox.ur.y),this.polys.push(w)}this.isSubject=s}return c(v,[{key:"getSweepEvents",value:function(){for(var a=[],s=0,d=this.polys.length;s<d;s++)for(var M=this.polys[s].getSweepEvents(),w=0,j=M.length;w<j;w++)a.push(M[w]);return a}}]),v}(),se=function(){function v(a){l(this,v),this.events=a;for(var s=0,d=a.length;s<d;s++)a[s].segment.ringOut=this;this.poly=null}return c(v,null,[{key:"factory",value:function(a){for(var s=[],d=0,M=a.length;d<M;d++){var w=a[d];if(w.isInResult()&&!w.ringOut){for(var j=null,U=w.leftSE,J=w.rightSE,rt=[U],ot=U.point,st=[];j=U,U=J,rt.push(U),U.point!==ot;)for(;;){var it=U.getAvailableLinkedEvents();if(it.length===0){var bt=rt[0].point,gt=rt[rt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(bt.x,",")+" ".concat(bt.y,"]. Last matching segment found ends at")+" [".concat(gt.x,", ").concat(gt.y,"]."))}if(it.length===1){J=it[0].otherSE;break}for(var yt=null,ft=0,kt=st.length;ft<kt;ft++)if(st[ft].point===U.point){yt=ft;break}if(yt===null){st.push({index:rt.length,point:U.point});var wt=U.getLeftmostComparator(j);J=it.sort(wt)[0].otherSE;break}var Ot=st.splice(yt)[0],Ct=rt.splice(Ot.index);Ct.unshift(Ct[0].otherSE),s.push(new v(Ct.reverse()))}s.push(new v(rt))}}return s}}]),c(v,[{key:"getGeom",value:function(){for(var a=this.events[0].point,s=[a],d=1,M=this.events.length-1;d<M;d++){var w=this.events[d].point,j=this.events[d+1].point;et(w,a,j)!==0&&(s.push(w),a=w)}if(s.length===1)return null;var U=s[0],J=s[1];et(U,a,J)===0&&s.shift(),s.push(s[0]);for(var rt=this.isExteriorRing()?1:-1,ot=this.isExteriorRing()?0:s.length-1,st=this.isExteriorRing()?s.length:-1,it=[],bt=ot;bt!=st;bt+=rt)it.push([s[bt].x,s[bt].y]);return it}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var a=this.enclosingRing();this._isExteriorRing=!a||!a.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var a=this.events[0],s=1,d=this.events.length;s<d;s++){var M=this.events[s];_t.compare(a,M)>0&&(a=M)}for(var w=a.segment.prevInResult(),j=w?w.prevInResult():null;;){if(!w)return null;if(!j)return w.ringOut;if(j.ringOut!==w.ringOut)return j.ringOut.enclosingRing()!==w.ringOut?w.ringOut:w.ringOut.enclosingRing();w=j.prevInResult(),j=w?w.prevInResult():null}}}]),v}(),Ut=function(){function v(a){l(this,v),this.exteriorRing=a,a.poly=this,this.interiorRings=[]}return c(v,[{key:"addInterior",value:function(a){this.interiorRings.push(a),a.poly=this}},{key:"getGeom",value:function(){var a=[this.exteriorRing.getGeom()];if(a[0]===null)return null;for(var s=0,d=this.interiorRings.length;s<d;s++){var M=this.interiorRings[s].getGeom();M!==null&&a.push(M)}return a}}]),v}(),ye=function(){function v(a){l(this,v),this.rings=a,this.polys=this._composePolys(a)}return c(v,[{key:"getGeom",value:function(){for(var a=[],s=0,d=this.polys.length;s<d;s++){var M=this.polys[s].getGeom();M!==null&&a.push(M)}return a}},{key:"_composePolys",value:function(a){for(var s=[],d=0,M=a.length;d<M;d++){var w=a[d];if(!w.poly)if(w.isExteriorRing())s.push(new Ut(w));else{var j=w.enclosingRing();j.poly||s.push(new Ut(j)),j.poly.addInterior(w)}}return s}}]),v}(),le=function(){function v(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jt.compare;l(this,v),this.queue=a,this.tree=new T(s),this.segments=[]}return c(v,[{key:"process",value:function(a){var s=a.segment,d=[];if(a.consumedBy)return a.isLeft?this.queue.remove(a.otherSE):this.tree.remove(s),d;var M=a.isLeft?this.tree.insert(s):this.tree.find(s);if(!M)throw new Error("Unable to find segment #".concat(s.id," ")+"[".concat(s.leftSE.point.x,", ").concat(s.leftSE.point.y,"] -> ")+"[".concat(s.rightSE.point.x,", ").concat(s.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var w=M,j=M,U=void 0,J=void 0;U===void 0;)(w=this.tree.prev(w))===null?U=null:w.key.consumedBy===void 0&&(U=w.key);for(;J===void 0;)(j=this.tree.next(j))===null?J=null:j.key.consumedBy===void 0&&(J=j.key);if(a.isLeft){var rt=null;if(U){var ot=U.getIntersection(s);if(ot!==null&&(s.isAnEndpoint(ot)||(rt=ot),!U.isAnEndpoint(ot)))for(var st=this._splitSafely(U,ot),it=0,bt=st.length;it<bt;it++)d.push(st[it])}var gt=null;if(J){var yt=J.getIntersection(s);if(yt!==null&&(s.isAnEndpoint(yt)||(gt=yt),!J.isAnEndpoint(yt)))for(var ft=this._splitSafely(J,yt),kt=0,wt=ft.length;kt<wt;kt++)d.push(ft[kt])}if(rt!==null||gt!==null){var Ot=null;Ot=rt===null?gt:gt===null||_t.comparePoints(rt,gt)<=0?rt:gt,this.queue.remove(s.rightSE),d.push(s.rightSE);for(var Ct=s.split(Ot),It=0,Vt=Ct.length;It<Vt;It++)d.push(Ct[It])}d.length>0?(this.tree.remove(s),d.push(a)):(this.segments.push(s),s.prev=U)}else{if(U&&J){var Rt=U.getIntersection(J);if(Rt!==null){if(!U.isAnEndpoint(Rt))for(var At=this._splitSafely(U,Rt),zt=0,Pt=At.length;zt<Pt;zt++)d.push(At[zt]);if(!J.isAnEndpoint(Rt))for(var St=this._splitSafely(J,Rt),jt=0,Yt=St.length;jt<Yt;jt++)d.push(St[jt])}}this.tree.remove(s)}return d}},{key:"_splitSafely",value:function(a,s){this.tree.remove(a);var d=a.rightSE;this.queue.remove(d);var M=a.split(s);return M.push(d),a.consumedBy===void 0&&this.tree.insert(a),M}}]),v}(),Qt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ve=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Tt=new(function(){function v(){l(this,v)}return c(v,[{key:"run",value:function(a,s,d){Tt.type=a,Z.reset();for(var M=[new Nt(s,!0)],w=0,j=d.length;w<j;w++)M.push(new Nt(d[w],!1));if(Tt.numMultiPolys=M.length,Tt.type==="difference")for(var U=M[0],J=1;J<M.length;)D(M[J].bbox,U.bbox)!==null?J++:M.splice(J,1);if(Tt.type==="intersection"){for(var rt=0,ot=M.length;rt<ot;rt++)for(var st=M[rt],it=rt+1,bt=M.length;it<bt;it++)if(D(st.bbox,M[it].bbox)===null)return[]}for(var gt=new T(_t.compare),yt=0,ft=M.length;yt<ft;yt++)for(var kt=M[yt].getSweepEvents(),wt=0,Ot=kt.length;wt<Ot;wt++)if(gt.insert(kt[wt]),gt.size>Qt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Ct=new le(gt),It=gt.size,Vt=gt.pop();Vt;){var Rt=Vt.key;if(gt.size===It){var At=Rt.segment;throw new Error("Unable to pop() ".concat(Rt.isLeft?"left":"right"," SweepEvent ")+"[".concat(Rt.point.x,", ").concat(Rt.point.y,"] from segment #").concat(At.id," ")+"[".concat(At.leftSE.point.x,", ").concat(At.leftSE.point.y,"] -> ")+"[".concat(At.rightSE.point.x,", ").concat(At.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(gt.size>Qt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Ct.segments.length>ve)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var zt=Ct.process(Rt),Pt=0,St=zt.length;Pt<St;Pt++){var jt=zt[Pt];jt.consumedBy===void 0&&gt.insert(jt)}It=gt.size,Vt=gt.pop()}Z.reset();var Yt=se.factory(Ct.segments);return new ye(Yt).getGeom()}}]),v}()),he=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),d=1;d<a;d++)s[d-1]=arguments[d];return Tt.run("union",v,s)},ue=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),d=1;d<a;d++)s[d-1]=arguments[d];return Tt.run("intersection",v,s)},Le=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),d=1;d<a;d++)s[d-1]=arguments[d];return Tt.run("xor",v,s)},te=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),d=1;d<a;d++)s[d-1]=arguments[d];return Tt.run("difference",v,s)};return{union:he,intersection:ue,xor:Le,difference:te}}()},2582:function(h){h.exports=function(){function l(g,x,D,F,X){(function q($,tt,Z,Q,ut){for(;Q>Z;){if(Q-Z>600){var et=Q-Z+1,ht=tt-Z+1,vt=Math.log(et),ct=.5*Math.exp(2*vt/3),Lt=.5*Math.sqrt(vt*ct*(et-ct)/et)*(ht-et/2<0?-1:1);q($,tt,Math.max(Z,Math.floor(tt-ht*ct/et+Lt)),Math.min(Q,Math.floor(tt+(et-ht)*ct/et+Lt)),ut)}var Dt=$[tt],lt=Z,_t=Q;for(o($,Z,tt),ut($[Q],Dt)>0&&o($,Z,Q);lt<_t;){for(o($,lt,_t),lt++,_t--;ut($[lt],Dt)<0;)lt++;for(;ut($[_t],Dt)>0;)_t--}ut($[Z],Dt)===0?o($,Z,_t):o($,++_t,Q),_t<=tt&&(Z=_t+1),tt<=_t&&(Q=_t-1)}})(g,x,D||0,F||g.length-1,X||c)}function o(g,x,D){var F=g[x];g[x]=g[D],g[D]=F}function c(g,x){return g<x?-1:g>x?1:0}var p=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function y(g,x,D){if(!D)return x.indexOf(g);for(var F=0;F<x.length;F++)if(D(g,x[F]))return F;return-1}function f(g,x){C(g,0,g.children.length,x,g)}function C(g,x,D,F,X){X||(X=S(null)),X.minX=1/0,X.minY=1/0,X.maxX=-1/0,X.maxY=-1/0;for(var q=x;q<D;q++){var $=g.children[q];A(X,g.leaf?F($):$)}return X}function A(g,x){return g.minX=Math.min(g.minX,x.minX),g.minY=Math.min(g.minY,x.minY),g.maxX=Math.max(g.maxX,x.maxX),g.maxY=Math.max(g.maxY,x.maxY),g}function G(g,x){return g.minX-x.minX}function H(g,x){return g.minY-x.minY}function T(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function E(g){return g.maxX-g.minX+(g.maxY-g.minY)}function I(g,x){return g.minX<=x.minX&&g.minY<=x.minY&&x.maxX<=g.maxX&&x.maxY<=g.maxY}function P(g,x){return x.minX<=g.maxX&&x.minY<=g.maxY&&x.maxX>=g.minX&&x.maxY>=g.minY}function S(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function O(g,x,D,F,X){for(var q=[x,D];q.length;)if(!((D=q.pop())-(x=q.pop())<=F)){var $=x+Math.ceil((D-x)/F/2)*F;l(g,$,x,D,X),q.push(x,$,$,D)}}return p.prototype.all=function(){return this._all(this.data,[])},p.prototype.search=function(g){var x=this.data,D=[];if(!P(g,x))return D;for(var F=this.toBBox,X=[];x;){for(var q=0;q<x.children.length;q++){var $=x.children[q],tt=x.leaf?F($):$;P(g,tt)&&(x.leaf?D.push($):I(g,tt)?this._all($,D):X.push($))}x=X.pop()}return D},p.prototype.collides=function(g){var x=this.data;if(!P(g,x))return!1;for(var D=[];x;){for(var F=0;F<x.children.length;F++){var X=x.children[F],q=x.leaf?this.toBBox(X):X;if(P(g,q)){if(x.leaf||I(g,q))return!0;D.push(X)}}x=D.pop()}return!1},p.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var x=0;x<g.length;x++)this.insert(g[x]);return this}var D=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<D.height){var F=this.data;this.data=D,D=F}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this},p.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},p.prototype.clear=function(){return this.data=S([]),this},p.prototype.remove=function(g,x){if(!g)return this;for(var D,F,X,q=this.data,$=this.toBBox(g),tt=[],Z=[];q||tt.length;){if(q||(q=tt.pop(),F=tt[tt.length-1],D=Z.pop(),X=!0),q.leaf){var Q=y(g,q.children,x);if(Q!==-1)return q.children.splice(Q,1),tt.push(q),this._condense(tt),this}X||q.leaf||!I(q,$)?F?(D++,q=F.children[D],X=!1):q=null:(tt.push(q),Z.push(D),D=0,F=q,q=q.children[0])}return this},p.prototype.toBBox=function(g){return g},p.prototype.compareMinX=function(g,x){return g.minX-x.minX},p.prototype.compareMinY=function(g,x){return g.minY-x.minY},p.prototype.toJSON=function(){return this.data},p.prototype.fromJSON=function(g){return this.data=g,this},p.prototype._all=function(g,x){for(var D=[];g;)g.leaf?x.push.apply(x,g.children):D.push.apply(D,g.children),g=D.pop();return x},p.prototype._build=function(g,x,D,F){var X,q=D-x+1,$=this._maxEntries;if(q<=$)return f(X=S(g.slice(x,D+1)),this.toBBox),X;F||(F=Math.ceil(Math.log(q)/Math.log($)),$=Math.ceil(q/Math.pow($,F-1))),(X=S([])).leaf=!1,X.height=F;var tt=Math.ceil(q/$),Z=tt*Math.ceil(Math.sqrt($));O(g,x,D,Z,this.compareMinX);for(var Q=x;Q<=D;Q+=Z){var ut=Math.min(Q+Z-1,D);O(g,Q,ut,tt,this.compareMinY);for(var et=Q;et<=ut;et+=tt){var ht=Math.min(et+tt-1,ut);X.children.push(this._build(g,et,ht,F-1))}}return f(X,this.toBBox),X},p.prototype._chooseSubtree=function(g,x,D,F){for(;F.push(x),!x.leaf&&F.length-1!==D;){for(var X=1/0,q=1/0,$=void 0,tt=0;tt<x.children.length;tt++){var Z=x.children[tt],Q=T(Z),ut=(et=g,ht=Z,(Math.max(ht.maxX,et.maxX)-Math.min(ht.minX,et.minX))*(Math.max(ht.maxY,et.maxY)-Math.min(ht.minY,et.minY))-Q);ut<q?(q=ut,X=Q<X?Q:X,$=Z):ut===q&&Q<X&&(X=Q,$=Z)}x=$||x.children[0]}var et,ht;return x},p.prototype._insert=function(g,x,D){var F=D?g:this.toBBox(g),X=[],q=this._chooseSubtree(F,this.data,x,X);for(q.children.push(g),A(q,F);x>=0&&X[x].children.length>this._maxEntries;)this._split(X,x),x--;this._adjustParentBBoxes(F,X,x)},p.prototype._split=function(g,x){var D=g[x],F=D.children.length,X=this._minEntries;this._chooseSplitAxis(D,X,F);var q=this._chooseSplitIndex(D,X,F),$=S(D.children.splice(q,D.children.length-q));$.height=D.height,$.leaf=D.leaf,f(D,this.toBBox),f($,this.toBBox),x?g[x-1].children.push($):this._splitRoot(D,$)},p.prototype._splitRoot=function(g,x){this.data=S([g,x]),this.data.height=g.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},p.prototype._chooseSplitIndex=function(g,x,D){for(var F,X,q,$,tt,Z,Q,ut=1/0,et=1/0,ht=x;ht<=D-x;ht++){var vt=C(g,0,ht,this.toBBox),ct=C(g,ht,D,this.toBBox),Lt=(X=vt,q=ct,$=void 0,tt=void 0,Z=void 0,Q=void 0,$=Math.max(X.minX,q.minX),tt=Math.max(X.minY,q.minY),Z=Math.min(X.maxX,q.maxX),Q=Math.min(X.maxY,q.maxY),Math.max(0,Z-$)*Math.max(0,Q-tt)),Dt=T(vt)+T(ct);Lt<ut?(ut=Lt,F=ht,et=Dt<et?Dt:et):Lt===ut&&Dt<et&&(et=Dt,F=ht)}return F||D-x},p.prototype._chooseSplitAxis=function(g,x,D){var F=g.leaf?this.compareMinX:G,X=g.leaf?this.compareMinY:H;this._allDistMargin(g,x,D,F)<this._allDistMargin(g,x,D,X)&&g.children.sort(F)},p.prototype._allDistMargin=function(g,x,D,F){g.children.sort(F);for(var X=this.toBBox,q=C(g,0,x,X),$=C(g,D-x,D,X),tt=E(q)+E($),Z=x;Z<D-x;Z++){var Q=g.children[Z];A(q,g.leaf?X(Q):Q),tt+=E(q)}for(var ut=D-x-1;ut>=x;ut--){var et=g.children[ut];A($,g.leaf?X(et):et),tt+=E($)}return tt},p.prototype._adjustParentBBoxes=function(g,x,D){for(var F=D;F>=0;F--)A(x[F],g)},p.prototype._condense=function(g){for(var x=g.length-1,D=void 0;x>=0;x--)g[x].children.length===0?x>0?(D=g[x-1].children).splice(D.indexOf(g[x]),1):this.clear():f(g[x],this.toBBox)},p}()}},K={};function W(h){var l=K[h];if(l!==void 0)return l.exports;var o=K[h]={id:h,loaded:!1,exports:{}};return z[h].call(o.exports,o,o.exports,W),o.loaded=!0,o.exports}W.n=h=>{var l=h&&h.__esModule?()=>h.default:()=>h;return W.d(l,{a:l}),l},W.d=(h,l)=>{for(var o in l)W.o(l,o)&&!W.o(h,o)&&Object.defineProperty(h,o,{enumerable:!0,get:l[o]})},W.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),W.o=(h,l)=>Object.prototype.hasOwnProperty.call(h,l),W.nmd=h=>(h.paths=[],h.children||(h.children=[]),h),W(414)})();(function(){function z(K){return this instanceof z?(this._canvas=K=typeof K=="string"?document.getElementById(K):K,this._ctx=K.getContext("2d"),this._width=K.width,this._height=K.height,this._max=1,void this.clear()):new z(K)}z.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(K,W){return this._data=K,this},max:function(K){return this._max=K,this},add:function(K){return this._data.push(K),this},clear:function(){return this._data=[],this},radius:function(K,W){W=W||15;var h=this._circle=document.createElement("canvas"),l=h.getContext("2d"),o=this._r=K+W;return h.width=h.height=2*o,l.shadowOffsetX=l.shadowOffsetY=200,l.shadowBlur=W,l.shadowColor="black",l.beginPath(),l.arc(o-200,o-200,K,0,2*Math.PI,!0),l.closePath(),l.fill(),this},gradient:function(K){var W=document.createElement("canvas"),h=W.getContext("2d"),l=h.createLinearGradient(0,0,0,256);W.width=1,W.height=256;for(var o in K)l.addColorStop(o,K[o]);return h.fillStyle=l,h.fillRect(0,0,1,256),this._grad=h.getImageData(0,0,1,256).data,this},draw:function(K){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var W=this._ctx;W.clearRect(0,0,this._width,this._height);for(var h,l=0,o=this._data.length;o>l;l++)h=this._data[l],W.globalAlpha=Math.max(h[2]/this._max,K||.05),W.drawImage(this._circle,h[0]-this._r,h[1]-this._r);var c=W.getImageData(0,0,this._width,this._height);return this._colorize(c.data,this._grad),W.putImageData(c,0,0),this},_colorize:function(K,W){for(var h,l=3,o=K.length;o>l;l+=4)h=4*K[l],h&&(K[l-3]=W[h],K[l-2]=W[h+1],K[l-1]=W[h+2])}},window.simpleheat=z})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(z,K){this._latlngs=z,L.setOptions(this,K)},setLatLngs:function(z){return this._latlngs=z,this.redraw()},addLatLng:function(z){return this._latlngs.push(z),this.redraw()},setOptions:function(z){return L.setOptions(this,z),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(z){this._map=z,this._canvas||this._initCanvas(),z._panes.overlayPane.appendChild(this._canvas),z.on("moveend",this._reset,this),z.options.zoomAnimation&&L.Browser.any3d&&z.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(z){z.getPanes().overlayPane.removeChild(this._canvas),z.off("moveend",this._reset,this),z.options.zoomAnimation&&z.off("zoomanim",this._animateZoom,this)},addTo:function(z){return z.addLayer(this),this},_initCanvas:function(){var z=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),K=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);z.style[K]="50% 50%";var W=this._map.getSize();z.width=W.x,z.height=W.y;var h=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(z,"leaflet-zoom-"+(h?"animated":"hide")),this._heat=simpleheat(z),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var z=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,z);var K=this._map.getSize();this._heat._width!==K.x&&(this._canvas.width=this._heat._width=K.x),this._heat._height!==K.y&&(this._canvas.height=this._heat._height=K.y),this._redraw()},_redraw:function(){var z,K,W,h,l,o,c,p,y,f=[],C=this._heat._r,A=this._map.getSize(),G=new L.Bounds(L.point([-C,-C]),A.add([C,C])),H=this.options.max===void 0?1:this.options.max,T=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,E=1/Math.pow(2,Math.max(0,Math.min(T-this._map.getZoom(),12))),I=C/2,P=[],S=this._map._getMapPanePos(),O=S.x%I,g=S.y%I;for(z=0,K=this._latlngs.length;K>z;z++)if(W=this._map.latLngToContainerPoint(this._latlngs[z]),G.contains(W)){l=Math.floor((W.x-O)/I)+2,o=Math.floor((W.y-g)/I)+2;var x=this._latlngs[z].alt!==void 0?this._latlngs[z].alt:this._latlngs[z][2]!==void 0?+this._latlngs[z][2]:1;y=x*E,P[o]=P[o]||[],h=P[o][l],h?(h[0]=(h[0]*h[2]+W.x*y)/(h[2]+y),h[1]=(h[1]*h[2]+W.y*y)/(h[2]+y),h[2]+=y):P[o][l]=[W.x,W.y,y]}for(z=0,K=P.length;K>z;z++)if(P[z])for(c=0,p=P[z].length;p>c;c++)h=P[z][c],h&&f.push([Math.round(h[0]),Math.round(h[1]),Math.min(h[2],H)]);this._heat.data(f).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(z){var K=this._map.getZoomScale(z.zoom),W=this._map._getCenterOffset(z.center)._multiplyBy(-K).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,W,K):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(W)+" scale("+K+")"}}),L.heatLayer=function(z,K){return new L.HeatLayer(z,K)};const ae=[{lat:28.6139,lng:77.209,crime:"Murder",time:1658300783,intensity:""},{lat:28.6148,lng:77.211,crime:"Murder",time:1658201783,intensity:""},{lat:28.615,lng:77.207,crime:"Assault",time:1658302632,intensity:""},{lat:28.620799,lng:77.212343,crime:"Assault",time:1658101083,intensity:""},{lat:28.625,lng:77.22,crime:"Murder",time:1658000783,intensity:""},{lat:28.614,lng:77.203,crime:"Assault",time:1658130003,intensity:""},{lat:28.624,lng:77.213,crime:"Drugs",time:1658130003,intensity:""},{lat:28.629,lng:77.213,crime:"Drugs",time:1658130203,intensity:""},{lat:28.624,lng:77.218,crime:"Other",time:1658130003,intensity:""},{lat:28.609,lng:77.218,crime:"Other",time:1658130003,intensity:""},{lat:28.629,lng:77.218,crime:"Burglary",time:1658130003,intensity:""},{lat:28.617,lng:77.22,crime:"Burglary",time:1658302632,intensity:""},{lat:28.6139,lng:77.219,crime:"Theft",time:1658301783,intensity:""}],On=[{type:"Feature",stationID:1,name:"KAPASHERA",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.111425,28.534482],[77.060244,28.545034],[77.046504,28.536291],[77.026237,28.539909],[77.015589,28.542019],[77.007345,28.55227],[77.00391,28.55016],[77.01078,28.541416],[77.008032,28.538401],[77.028298,28.523023],[77.02555,28.518198],[77.043069,28.510659],[77.050626,28.520912],[77.09322,28.514278],[77.100777,28.524833],[77.111425,28.534482]]]}},{type:"Feature",stationID:2,name:"VASANT KUNJ SOUTH",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.100777,28.524833],[77.111425,28.534482],[77.124822,28.546843],[77.132035,28.5381],[77.140279,28.537195],[77.149554,28.528753],[77.158485,28.521214],[77.163637,28.513675],[77.176347,28.507341],[77.174973,28.502516],[77.147836,28.492562],[77.133753,28.485926],[77.124478,28.478686],[77.115891,28.482306],[77.119669,28.494975],[77.094594,28.505833],[77.099746,28.511564],[77.09322,28.514278],[77.100777,28.524833]]]}},{type:"Feature",stationID:3,name:"VASANT KUNJ NORTH",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.132035,28.5381],[77.124822,28.546843],[77.131444,28.552273],[77.13299,28.554685],[77.135051,28.555439],[77.142093,28.552876],[77.14965,28.563276],[77.151711,28.564934],[77.156176,28.561317],[77.162188,28.559659],[77.166138,28.553178],[77.178847,28.547299],[77.178504,28.544435],[77.184172,28.540968],[77.19774,28.536445],[77.195164,28.531319],[77.190355,28.528605],[77.187607,28.525741],[77.183656,28.526344],[77.182454,28.523027],[77.179019,28.520011],[77.177989,28.517146],[77.178504,28.513528],[77.177989,28.510663],[77.176347,28.507341],[77.163637,28.513675],[77.158485,28.521214],[77.140279,28.537195],[77.132035,28.5381]]]}},{type:"Feature",stationID:4,name:"VASANT VIHAR",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.135051,28.555439],[77.134418,28.564347],[77.133388,28.569471],[77.144036,28.574595],[77.150563,28.573992],[77.160524,28.576404],[77.167051,28.56495],[77.176325,28.555605],[77.190409,28.547767],[77.202431,28.544752],[77.19774,28.536445],[77.184172,28.540968],[77.178504,28.544435],[77.178847,28.547299],[77.166138,28.553178],[77.162188,28.559659],[77.156176,28.561317],[77.151711,28.564934],[77.14965,28.563276],[77.142093,28.552876],[77.135051,28.555439]]]}},{type:"Feature",stationID:5,name:"R.K. PURAM",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.184627,28.550985],[77.188112,28.560715],[77.189486,28.569306],[77.182787,28.570361],[77.18107,28.570963],[77.178665,28.570511],[77.174543,28.57232],[77.172139,28.575937],[77.162683,28.572616],[77.167051,28.56495],[77.176325,28.555605],[77.184627,28.550985]]]}},{type:"Feature",stationID:6,name:"SOUTH CAMPUS",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.160524,28.576404],[77.158957,28.57819],[77.158439,28.580452],[77.160241,28.584295],[77.16462,28.587611],[77.166338,28.587763],[77.166081,28.589346],[77.164879,28.593038],[77.16628,28.594026],[77.169028,28.5883],[77.172807,28.583328],[77.18191,28.580465],[77.175898,28.577903],[77.172139,28.575937],[77.164797,28.573359],[77.162709,28.572569],[77.160524,28.576404]]]}},{type:"Feature",stationID:7,name:"PP SUBROTO PARK",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.166338,28.587763],[77.164879,28.593038],[77.166196,28.595978],[77.167227,28.597786],[77.164307,28.597334],[77.15924,28.601327],[77.156149,28.603286],[77.149833,28.605169],[77.143307,28.606826],[77.141074,28.608032],[77.139872,28.606224],[77.150904,28.602533],[77.154956,28.601224],[77.150223,28.590479],[77.151683,28.588218],[77.146359,28.585205],[77.144036,28.574595],[77.150563,28.573992],[77.160524,28.576404],[77.158957,28.57819],[77.158439,28.580452],[77.160241,28.584295],[77.16462,28.587611],[77.166338,28.587763]]]}},{type:"Feature",stationID:8,name:"DELHI CANTT.",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.151683,28.588218],[77.150223,28.590479],[77.154956,28.601224],[77.139872,28.606224],[77.135572,28.607433],[77.132137,28.607885],[77.130076,28.60668],[77.127328,28.605625],[77.122004,28.607433],[77.115134,28.610446],[77.101566,28.594476],[77.091776,28.58423],[77.085593,28.577147],[77.088341,28.575339],[77.094352,28.576243],[77.098474,28.579709],[77.118226,28.574133],[77.120974,28.573681],[77.121145,28.562528],[77.127672,28.566447],[77.125954,28.561926],[77.131444,28.552273],[77.13299,28.554685],[77.135051,28.555439],[77.134418,28.564347],[77.133388,28.569471],[77.144036,28.574595],[77.146359,28.585205],[77.151683,28.588218]]]}},{type:"Feature",stationID:9,name:"SAGARPUR",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.110439,28.60492],[77.104045,28.607883],[77.100094,28.609089],[77.097518,28.609013],[77.093911,28.610595],[77.097003,28.608335],[77.096144,28.606829],[77.09477,28.605171],[77.089703,28.605849],[77.089016,28.605096],[77.09228,28.60148],[77.092022,28.599823],[77.095972,28.597714],[77.097089,28.597714],[77.098978,28.596734],[77.101566,28.594476],[77.110439,28.60492]]]}},{type:"Feature",stationID:10,name:"PALAM VILLAGE",district:"SOUTH-WEST DISTRICT",geometry:{type:"Polygon",coordinates:[[[77.101566,28.594476],[77.098978,28.596734],[77.097089,28.597714],[77.095972,28.597714],[77.092022,28.599823],[77.090132,28.596205],[77.087899,28.596657],[77.085838,28.595301],[77.083519,28.593569],[77.081287,28.593041],[77.080342,28.591761],[77.085065,28.586863],[77.084893,28.583322],[77.083519,28.580158],[77.085593,28.577147],[77.101566,28.594476]]]}},{type:"Feature",stationID:11,name:"JAFARPUR KALAN",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[76.973868,28.607275],[76.967951,28.598848],[76.953384,28.577955],[76.93736,28.559191],[76.929983,28.548619],[76.918908,28.532744],[76.90871,28.536584],[76.904826,28.530185],[76.908225,28.530185],[76.917936,28.522932],[76.931047,28.514399],[76.92959,28.509705],[76.923278,28.514825],[76.915508,28.516532],[76.904826,28.512265],[76.894143,28.512692],[76.889773,28.506718],[76.882489,28.506718],[76.875691,28.512692],[76.878119,28.519519],[76.884917,28.527198],[76.873748,28.534024],[76.861123,28.541276],[76.857238,28.548101],[76.845099,28.555352],[76.842185,28.563455],[76.837815,28.576249],[76.840729,28.59032],[76.857238,28.595863],[76.863551,28.603537],[76.873748,28.621867],[76.87909,28.633375],[76.888316,28.635506],[76.901427,28.634228],[76.908225,28.637211],[76.917451,28.632523],[76.919879,28.624425],[76.931047,28.619736],[76.931533,28.614195],[76.9461,28.608227],[76.973868,28.607275]]]}},{type:"Feature",stationID:12,name:"CHHAWALA",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[76.931047,28.514399],[76.92959,28.509705],[76.94837,28.505579],[76.97585,28.516436],[76.973102,28.52488],[77.001956,28.518849],[77.00922,28.514725],[77.016777,28.520304],[77.028298,28.523023],[77.008032,28.538401],[77.01078,28.541416],[77.00391,28.55016],[77.007345,28.55227],[77.029031,28.56554],[77.037275,28.57398],[77.037962,28.579405],[77.015978,28.584529],[77.020443,28.59146],[77.010482,28.590857],[77.010482,28.594172],[77.01426,28.596583],[76.998803,28.60261],[76.98575,28.593871],[76.980254,28.596282],[76.967951,28.598848],[76.953384,28.577955],[76.93736,28.559191],[76.918908,28.532744],[76.90871,28.536584],[76.904826,28.530185],[76.908225,28.530185],[76.917936,28.522932],[76.931047,28.514399]]]}},{type:"Feature",stationID:13,name:"BABA HARIDAS NAGAR",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[76.919879,28.624425],[76.931047,28.619736],[76.931533,28.614195],[76.9461,28.608227],[76.975235,28.6078],[76.976206,28.611637],[77.004655,28.635168],[76.999846,28.647216],[76.992976,28.650228],[76.985076,28.645409],[76.977862,28.654144],[76.970305,28.666491],[76.964809,28.672514],[76.953501,28.670861],[76.946029,28.671915],[76.940705,28.671313],[76.933406,28.666947],[76.931445,28.66153],[76.923888,28.649784],[76.928398,28.64571],[76.917451,28.632523],[76.919879,28.624425]]]}},{type:"Feature",stationID:14,name:"NAJAFGARH",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.01426,28.596583],[77.014717,28.600211],[77.011626,28.60232],[77.009908,28.604881],[77.012313,28.608497],[77.016435,28.611962],[77.017465,28.615125],[77.020042,28.617536],[77.022618,28.620398],[77.021416,28.625519],[77.0209,28.627478],[77.017122,28.627026],[77.013859,28.625519],[77.007847,28.625067],[77.004584,28.625369],[77.000358,28.628153],[76.999188,28.630646],[76.976206,28.611637],[76.975235,28.6078],[76.974008,28.607536],[76.967951,28.598848],[76.980254,28.596282],[76.98575,28.593871],[76.998803,28.60261],[77.01426,28.596583]]]}},{type:"Feature",stationID:15,name:"PS. UTTAM NAGAR",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.021416,28.625519],[77.025912,28.632464],[77.024195,28.63879],[77.039996,28.650236],[77.054079,28.650236],[77.057514,28.640296],[77.061636,28.653248],[77.068506,28.624933],[77.053736,28.620715],[77.034156,28.61951],[77.022618,28.620398],[77.021416,28.625519]]]}},{type:"Feature",stationID:16,name:"PP SEC.3 DWK",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.030642,28.61978],[77.03649,28.613387],[77.039152,28.615421],[77.040698,28.614593],[77.041471,28.61045],[77.053493,28.604951],[77.057272,28.603971],[77.05023,28.596212],[77.044405,28.590114],[77.037535,28.595237],[77.042688,28.601113],[77.035474,28.605181],[77.030642,28.61978]]]}},{type:"Feature",stationID:17,name:"DWARKA NORTH",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.022618,28.620398],[77.030642,28.61978],[77.035474,28.605181],[77.042688,28.601113],[77.037535,28.595237],[77.044405,28.590114],[77.038909,28.583484],[77.041829,28.57836],[77.037275,28.57398],[77.037962,28.579405],[77.015978,28.584529],[77.020443,28.59146],[77.010482,28.590857],[77.010482,28.594172],[77.01426,28.596583],[77.014717,28.600211],[77.011626,28.60232],[77.009908,28.604881],[77.012313,28.608497],[77.016435,28.611962],[77.017465,28.615125],[77.020042,28.617536],[77.022618,28.620398]]]}},{type:"Feature",stationID:18,name:"BINDAPUR",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.050877,28.606148],[77.055895,28.606906],[77.055294,28.609317],[77.058213,28.609844],[77.058643,28.607358],[77.063108,28.606454],[77.067058,28.608112],[77.066887,28.610673],[77.06869,28.617904],[77.0662,28.61813],[77.068506,28.624933],[77.053736,28.620715],[77.034156,28.61951],[77.030642,28.61978],[77.03649,28.613387],[77.039152,28.615421],[77.040698,28.614593],[77.041471,28.61045],[77.050877,28.606148]]]}},{type:"Feature",stationID:19,name:"DABRI",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.068506,28.624933],[77.069969,28.621753],[77.093911,28.610595],[77.097003,28.608335],[77.096144,28.606829],[77.09477,28.605171],[77.089703,28.605849],[77.089016,28.605096],[77.09228,28.60148],[77.092022,28.599823],[77.090132,28.596205],[77.087899,28.596657],[77.083519,28.593569],[77.081287,28.593041],[77.072743,28.594197],[77.063125,28.597662],[77.057272,28.603971],[77.053493,28.604951],[77.051019,28.606083],[77.055895,28.606906],[77.055294,28.609317],[77.058213,28.609844],[77.058643,28.607358],[77.063108,28.606454],[77.067058,28.608112],[77.066887,28.610673],[77.06869,28.617904],[77.0662,28.61813],[77.068506,28.624933]]]}},{type:"Feature",stationID:20,name:"PP SEC.1 DWK",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.081287,28.593041],[77.080342,28.591761],[77.085065,28.586863],[77.084893,28.583322],[77.083519,28.580158],[77.081218,28.578802],[77.076323,28.578953],[77.069281,28.582042],[77.066275,28.583699],[77.066275,28.585131],[77.064987,28.586186],[77.057423,28.591381],[77.05023,28.596212],[77.057272,28.603971],[77.063125,28.597662],[77.072743,28.594197],[77.081287,28.593041]]]}},{type:"Feature",stationID:21,name:"DWARKA SOUTH",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.041829,28.57836],[77.052486,28.569616],[77.060043,28.564944],[77.063306,28.561478],[77.068115,28.563739],[77.066741,28.570521],[77.066054,28.571877],[77.072638,28.58057],[77.069281,28.582042],[77.066275,28.583699],[77.066275,28.585131],[77.064987,28.586186],[77.05023,28.596212],[77.044405,28.590114],[77.038909,28.583484],[77.041829,28.57836]]]}},{type:"Feature",stationID:22,name:"DWARKA SEC.23",district:"DWARKA",geometry:{type:"Polygon",coordinates:[[[77.068115,28.563739],[77.072401,28.561018],[77.060244,28.545034],[77.046504,28.536291],[77.015589,28.542019],[77.007345,28.55227],[77.029031,28.56554],[77.037275,28.57398],[77.041829,28.57836],[77.052486,28.569616],[77.060043,28.564944],[77.063306,28.561478],[77.068115,28.563739]]]}}];On.filter(z=>z.block==="Block 1");ae.filter(z=>z.crime==="Assault");const Rn={Murder:{color:"#c30b82",intensity:70},Assault:{color:"#74D173",intensity:40},Theft:{color:"#00b5b9",intensity:30},Burglary:{color:"#f5df62",intensity:30},Drugs:{color:"#eb7953",intensity:80},Other:{color:"#a393d1",intensity:50}};for(let z=0;z<ae.length;z++){let K=[];K.push(ae[z].lat),K.push(ae[z].lng),K.push(Rn[ae[z].crime].intensity)}async function Tn(z){return"https://www.youtube.com/watch?v=JHu2YuadxKg"}async function Bn(z){const K=await Tn();document.getElementById("cctvArea").innerHTML=`      
  <iframe width="100%" height="80%" src="${K}" frameborder="0"></iframe>
  <div class = "text-left font-bold text-l text-black dark:text-white">Playing video from the cctvID: ${z}</div>
`}function en(z){document.getElementById("stationData").innerHTML=`
  <table style="width:100%; padding:10px; margin:10px">
  <tr>
  <th>Property</th>
  <th>Value</th>
  </tr>
  <tr>
  <td>Police Station Name</td>
  <td>${z.name}</td>
  </tr>
  <tr>
  <td>Police District</td>
  <td>${z.district}</td>
  </tr>
  <tr>
  <td>Police Station Id</td>
  <td>${z.StationID}</td>
  </tr>
  <tr>
  <td>SHO</td>
  <td>${z.sho}</td>
  </tr>
  <tr>
  <td>Total Crimes</td>
  <td>${me[z.StationID]}</td>
  </tr>
  
  </table>
  `}const In={"DRUG SMUGGLING, POSSESION, SALE OR USE OF DRUGS":"#85C1E9","THE GAMBLING ACT":"#B2BABB","ROBBERY, THEFT, BURGLARY, DACOITY":"#D5F5E3","CULPABLE HOMICIDE AND GREVIOUS HURT":"#FADBD8","ROAD ACCIDENTS":"#82E0AA","ABDUCTION OR KIDNAPPING":"#FCF3CF","ARMS/EXPLOSIVE - RELATED ACTS":"#D98880",ASSAULT:"#F8C471",RAPE:"#A93226","THE MINES AND MINERALS (DEVELOPMENT AND REGULATION) ACT":"#76448A","FIRST DEGREE MURDER":"#F1C40F","ENVIRONMENT AND POLLUTION - RELATED ACTS":"#117A65","CHILD ABUSE":"#EDBB99","EXTORTION AND BLACKMAIL":"#FBFCFC","HUMAN TRAFFICKING":"#78281F","THE IMMORAL TRAFFIC (PREVENTION) ACT":"#5F6A6A"},An={"DRUG SMUGGLING, POSSESION, SALE OR USE OF DRUGS":10,"THE GAMBLING ACT":20,"ROBBERY, THEFT, BURGLARY, DACOITY":30,"CULPABLE HOMICIDE AND GREVIOUS HURT":40,"ROAD ACCIDENTS":50,"ABDUCTION OR KIDNAPPING":10,"ARMS/EXPLOSIVE - RELATED ACTS":20,ASSAULT:30,RAPE:20,"THE MINES AND MINERALS (DEVELOPMENT AND REGULATION) ACT":10,"FIRST DEGREE MURDER":14,"ENVIRONMENT AND POLLUTION - RELATED ACTS":90,"CHILD ABUSE":30,"EXTORTION AND BLACKMAIL":22,"HUMAN TRAFFICKING":24,"THE IMMORAL TRAFFIC (PREVENTION) ACT":10},jn=[28.7,77.1],Gn=8,nn=new xt.latLngBounds,rn=xt.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',maxZoom:20});var Nn=xt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20});const Un=xt.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20});xt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});const zn={"Dark Map":rn,"Light Map":Un,"Detailed Map":Nn},Fn=function(z){let K=new Date(z*1e3);return K.getDate()+"/"+K.getMonth()+"/"+K.getFullYear()},Vn=z=>{let K=z.toString();for(;K.length<4;)K="0"+K;let W=K.substring(0,2),h=K.substring(2,4);return W+":"+h},Kn=(z,K=2,W,h)=>{const l=In[z.primary_type];let o=`<div  class='custom-pin'  style="height:${8}px; width:${8}px; background-color:${l};box-shadow: 0px 0px ${K+1}px ${K}px ${l};"></div>`,c=xt.divIcon({className:"custom-div-icon",html:o});console.log("--"),W<=44&&(o=`<div class='ring3' style="border: 1px solid ${l};">
      <div class='ring2' style="border: 1px solid ${l};">
        <div class='ring1' style="border: 1px solid ${l};">
          <div  class='custom-pin'  style="height:${8}px; width:${8}px; background-color:${l};box-shadow: 0px 0px ${K+1}px ${K}px ${l};  position: absolute;
            top: 50%;
            left: 50%;
            margin-right: -50%;
            transform: translate(-50%, -50%) ">
          </div>
        </div>
      </div>
    </div>`,c=xt.divIcon({className:"custom-div-icon",html:o}));const p=z.crime;return xt.marker([z.lat,z.lng],{icon:c,crime:p}).bindPopup(`<div>
        <h3>
          <strong>Case Number: </strong>${z.case_number}
        </h3>
        <br>
        <strong>Crime Type (Primary Type): </strong>${z.primary_type}
        <br>
        <strong>Description: </strong>${z.description}
        <br>
        <strong>Crime Date and Time: </strong>${Fn(z.date)} and ${Vn(z.time)}</div>`).on("click",function(){Bn(h)})};class Hn{constructor(){this.markers=[],this.boundaries=xt.geoJSON([]),this.heatmapData=[],this.map=xt.map("map",{attributionControl:!1,layers:[rn],preferCanvas:!0,minZoom:5,maxBounds:nn}).setView(jn,Gn),this.addControls(),this.toggleControls(),this.layerControl=xt.control.layers(zn).addTo(this.map),this.markerLayer=xt.featureGroup(),this.layerControl.addOverlay(this.markerLayer,"Markers"),this.boundariesLayer=xt.featureGroup().addTo(this.map),this.layerControl.addOverlay(this.boundariesLayer,"Boundaries"),this.heatMapLayer=xt.heatLayer(this.heatmapData,{radius:20}),this.layerControl.addOverlay(this.heatMapLayer,"Heatmap"),this.map.on("pm:create",function(K){let W=12334,h=K.layer.toGeoJSON();h.stationID=W,window.prompt("Copy to clipboard: Ctrl+C, Enter",JSON.stringify(h))}),this.map.on("overlayadd",K=>{K.name==="Heatmap"&&this.heatmapData.length>0&&this.addHeatmap(),K.name==="Markers"&&this.markers.length>0&&this.addMarkers(),K.name==="Boundaries"&&this.addBoundaries()})}addControls(){this.map.pm.addControls({position:"topleft",drawCircleMarker:!1,drawRectangle:!1,drawCircle:!1,drawPolyline:!1,drawText:!1,dragMode:!1,rotateMode:!1,cutPolygon:!1}),xt.control.scale({imperial:!1}).addTo(this.map)}toggleControls(){this.map.pm.toggleControls()}addBoundaries(){this.boundariesLayer.addLayer(this.boundaries)}addMarkers(){if(this.markers.length>500){alert("Too many markers to display. Please use heatmap instead");return}this.markers.map(K=>{this.markerLayer.addLayer(K)})}addHeatmap(){this.heatMapLayer.setLatLngs(this.heatmapData)}changeView(K){this.map.flyToBounds(K,{animation:!0,duration:1})}clearMap(){try{this.boundaries=xt.geoJSON(),this.markers=[],this.heatmapData=[],this.boundariesLayer.clearLayers(),this.markerLayer.clearLayers(),this.heatMapLayer.setLatLngs([])}catch{console.log("error")}}applyFilter(K,W,h){if(this.clearMap(),console.log(W.length),K.length>0)h?(this.boundaries=xt.geoJSON(null,{style:function(l){return{color:tn(me[l.StationID]),fill:!0,opacity:.8}},onEachFeature(l,o){const c=tn(me[l.StationID]);o.on("mouseover",function(){this.setStyle({fillColor:"grey",fill:!0,opacity:.5}),en(l)}),o.on("mouseout",function(){this.setStyle({fillColor:c})})}}),this.boundaries.addData(K)):(this.boundaries=xt.geoJSON(null,{style:function(l){return{color:"blue",fill:!0,opacity:.8}},onEachFeature(l,o){o.on("mouseover",function(){this.setStyle({fillColor:"green",fill:!0,opacity:.5}),en(l)}),o.on("mouseout",function(){this.setStyle({fillColor:"blue"})})}}),this.boundaries.addData(K));else{this.changeView(nn);return}if(W.length===0){alert("No data found");return}W.length>0&&(this.markers=W.map(l=>{const o=l.date+l.time/100*60*60;let c=Date.now()-o*1e3,p=Math.floor(c/1e3/60/60),y;return p<=1?y=3:p<=24?y=2:y=1,Kn(l,y,p,"#1234")})),this.heatmapData=W.map(l=>{let o=[];return o.push(l.lat),o.push(l.lng),o.push(An[l.primary_type]),o}),this.map.hasLayer(this.heatMapLayer)&&this.addHeatmap(),this.map.hasLayer(this.markerLayer)&&this.addMarkers(),this.map.hasLayer(this.boundariesLayer)&&this.addBoundaries(),this.changeView(this.boundaries.getBounds())}}let $t=0,_e,oe,Ie=new Hn;document.getElementById("filter-form").addEventListener("submit",async z=>{z.preventDefault();const K=new FormData(z.target),W=Object.fromEntries(K),{case_number:h,StationID:l,act_type:o,primary_type:c,daterange:p,timerange:y}=W;console.log(W),_e=await(await fetch(`http://127.0.0.1:8000/station/${l}`)).json(),oe=await(await fetch("http://127.0.0.1:8000/marker/request",{method:"POST",body:JSON.stringify(W),headers:{"Content-Type":"application/json"}})).json(),Dn(oe),Ie.applyFilter(_e,oe,$t)});function qn(){$t?($t=0,Ie.applyFilter(_e,oe,$t)):($t=1,Ie.applyFilter(_e,oe,$t))}function Jn(){const z=document.getElementById("stationColorToggle");!z||(z.onclick=qn)}Jn();
